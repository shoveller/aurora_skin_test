{"version":3,"file":"src_pages_AdultCertification_index_js.94674cdec4620fa6b606.bundle.js","mappings":";;;;;;;;;;;;;;;;;;AAAA;;;;;;;;;;;;;;;;;;;ACAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAIA;AACA;AAAA;AAIA;AACA;AAAA;AACA;AAAA;AAGA;AAEA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AAEA;AACA;AAEA;AAEA;AACA;AACA;;;;;;;;;;;;;;;;ACxDA;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AAAA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7BA;AACA;AAEA;AAEA;AASA;AAEA;AACA;AACA;AAEA;AACA;AAEA;AAAA;AACA;AACA;AAGA;AACA;AAEA;AACA;AAAA;AACA;AACA;AAGA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AAAA;AAGA;AAEA;AAAA;AAAA;AACA;;AAEA;AACA;AACA;AAEA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAEA;AAAA;AACA;AAAA;AAGA;AAAA;AAAA;AAMA;AAEA;AACA;AACA;AAEA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAKA;AAAA;AAEA;AAAA;AAQA;AACA;AAIA;AACA;AACA;AACA;AACA;AAAA;AAMA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AACA;;;;;;;;;;;;;;;AC3IA;AAEA","sources":["webpack://@shopby/react-skin/./node_modules/@shopby/react-components/dist/esm/auth/AgeVerificationProvider/AgeVerificationProvider.js","webpack://@shopby/react-skin/./node_modules/@shopby/react-components/dist/esm/auth/IdentificationVerificationProvider/IdentificationVerificationProvider.js","webpack://@shopby/react-skin/./src/components/Layout/LayoutProvider.jsx","webpack://@shopby/react-skin/./src/hooks/useLayoutChanger.js","webpack://@shopby/react-skin/./src/pages/AdultCertification/AdultCertification.jsx","webpack://@shopby/react-skin/./src/pages/AdultCertification/index.js"],"sourcesContent":["var __assign=this&&this.__assign||function(){return __assign=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},__assign.apply(this,arguments)},__read=this&&this.__read||function(e,t){var r=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var i,n,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)a.push(i.value)}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return a};import{jsx as _jsx}from\"react/jsx-runtime\";import{createContext,useContext,useMemo,useState}from\"react\";import{authHelper,executeHelper}from\"@shopby/shared\";var _a=authHelper.ageVerification,Helper=_a.Helper,MUTATION_KEY=_a.MUTATION_KEY,DEFAULT_STATE={ageVerificationDetail:{birthday:\"\",verified:!1,verifiedDateTime:\"\"}},AgeVerificationStateContext=createContext(null),AgeVerificationActionContext=createContext(null),AgeVerificationProvider=function(e){var t=e.children,r=__read(useState(DEFAULT_STATE.ageVerificationDetail),2),i=r[0],n=r[1],o=(0,useMemo((function(){return executeHelper(new Helper)}),[]).executeMutation)(MUTATION_KEY.POST_KCP_AGE_VERIFICATION).mutate,a=useMemo((function(){return{postKcpAgeVerification:function(e){return o({payload:e,onSuccess:function(e){var t=e.data;n(t)}})}}}),[]);return _jsx(AgeVerificationStateContext.Provider,__assign({value:{ageVerificationDetail:i}},{children:_jsx(AgeVerificationActionContext.Provider,__assign({value:a},{children:t}))}))};export var useAgeVerificationStateContext=function(){var e=useContext(AgeVerificationStateContext);if(!e)throw new Error(\"INVALID_AgeVerificationStateContext\");return e};export var useAgeVerificationActionContext=function(){var e=useContext(AgeVerificationActionContext);if(!e)throw new Error(\"INVALID_AgeVerificationActionContext\");return e};export default AgeVerificationProvider;","var __assign=this&&this.__assign||function(){return __assign=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},__assign.apply(this,arguments)},__read=this&&this.__read||function(t,e){var i=\"function\"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,r,o=i.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(t){r={error:t}}finally{try{n&&!n.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return a};import{jsx as _jsx}from\"react/jsx-runtime\";import{createContext,useContext,useMemo,useState}from\"react\";import{executeHelper,authHelper}from\"@shopby/shared/helpers\";var IdentificationVerificationStateContext=createContext(null),IdentificationVerificationActionContext=createContext(null),_a=authHelper.identificationVerification,Helper=_a.Helper,QUERY_KEY=_a.QUERY_KEY,DEFAULT_STATE={isCiExist:!1,isIdentificationVerificationReSend:!1,kcpForm:null,ci:\"\"},IdentificationVerificationProvider=function(t){var e=t.children,i=__read(useState(DEFAULT_STATE.isIdentificationVerificationReSend),2),n=i[0],r=i[1],o=__read(useState(DEFAULT_STATE.isCiExist),2),a=o[0],c=o[1],f=__read(useState(DEFAULT_STATE.kcpForm),2),s=f[0],u=f[1],_=__read(useState(DEFAULT_STATE.ci),2),d=_[0],l=_[1],E=useMemo((function(){return executeHelper(new Helper)}),[]).executeQuery,I=useMemo((function(){return{updateIsIdentificationVerificationReSend:r,updateIsCiExist:c,updateCi:l,moveIdVerification:function(t){return E(QUERY_KEY.QUERY_KCP_ID_VERIFICATION_FORM,{payload:t,onSuccess:function(t){var e=t.data;u(e)}})},getIdVerificationResponse:function(t){return E(QUERY_KEY.QUERY_KCP_ID_VERIFICATION_RESPONSE,{payload:t})},verifyCi:function(t){return E(QUERY_KEY.QUERY_PROFILE_CI_EXISTS,{payload:t})}}}),[]);return _jsx(IdentificationVerificationActionContext.Provider,__assign({value:I},{children:_jsx(IdentificationVerificationStateContext.Provider,__assign({value:{isIdentificationVerificationReSend:n,isCiExist:a,kcpForm:s,ci:d}},{children:e}))}))};export default IdentificationVerificationProvider;export var useIdentificationVerificationActionContext=function(){var t=useContext(IdentificationVerificationActionContext);if(!t)throw new Error(\"INVALID_IdentificationVerificationActionContext\");return t};export var useIdentificationVerificationStateContext=function(){var t=useContext(IdentificationVerificationStateContext);if(!t)throw new Error(\"INVALID_IdentificationVerificationStateContext\");return t};","import { useContext, useMemo, useState, createContext } from 'react';\n\nimport { oneOfType, node, element } from 'prop-types';\n\nexport const LAYOUT_DEFAULT_STATE = {\n  isMain: false,\n  hasBackBtnOnHeader: false,\n  hasHomeBtnOnHeader: false,\n  hasCartBtnOnHeader: false,\n  hasSearchKeywordHeader: false,\n  hasCancelBtnOnHeader: false,\n  hasBottomNav: false,\n  title: '',\n};\n\nconst LayoutActionContext = createContext(null);\nconst LayoutValueContext = createContext(null);\n\nconst LayoutProvider = ({ children }) => {\n  const [layoutStatus, setLayoutStatus] = useState(LAYOUT_DEFAULT_STATE);\n  const action = useMemo(\n    () => ({\n      changeLayoutStatus: (layoutStatus) =>\n        setLayoutStatus({\n          ...LAYOUT_DEFAULT_STATE,\n          ...layoutStatus,\n        }),\n    }),\n    [setLayoutStatus]\n  );\n\n  return (\n    <LayoutActionContext.Provider value={action}>\n      <LayoutValueContext.Provider value={layoutStatus}>{children}</LayoutValueContext.Provider>\n    </LayoutActionContext.Provider>\n  );\n};\n\nexport const useLayoutActionContext = () => {\n  const context = useContext(LayoutActionContext);\n  if (!context) throw new Error('INVALID_LayoutActionContext');\n\n  return context;\n};\n\nexport const useLayoutValueContext = () => {\n  const context = useContext(LayoutValueContext);\n  if (!context) throw new Error('INVALID_LayoutValueContext');\n\n  return context;\n};\n\nexport default LayoutProvider;\n\nLayoutProvider.propTypes = {\n  children: oneOfType([node, element]).isRequired,\n};\n","import { useEffect } from 'react';\n\nimport { LAYOUT_DEFAULT_STATE, useLayoutActionContext } from '../components/Layout/LayoutProvider';\n\n/**\n * 레이아웃의 헤더 및 푸터 형태 설정을 할 수 있는 커스텀 훅.\n * 인자 객체로 담지 않은 값들은 기본 값으로 설정됩니다.\n *\n * [기본 값]\n * isMain: false,\n * hasBackBtnOnHeader: false,\n * hasHomeBtnOnHeader: false,\n * hasCartBtnOnHeader: false,\n * hasBottomNav: false,\n * hasCancelBtnOnHeader: false,\n * title: '',\n * @param {{ isMain?: boolean, hasHomeBtnOnHeader?: boolean, hasBackBtnOnHeader?: boolean, hasCartBtnOnHeader?: boolean, hasCancelBtnOnHeader?: boolean, hasBottomNav?: boolean, title?: string }} layoutStatus\n */\n\nconst useLayoutChanger = (layoutStatus = LAYOUT_DEFAULT_STATE) => {\n  const { changeLayoutStatus } = useLayoutActionContext();\n\n  useEffect(() => {\n    if (changeLayoutStatus) {\n      changeLayoutStatus(layoutStatus);\n    }\n  }, [changeLayoutStatus, layoutStatus]);\n};\n\nexport default useLayoutChanger;\n","import { useEffect, useState } from 'react';\nimport { useLocation } from 'react-router-dom';\n\nimport { func } from 'prop-types';\n\nimport {\n  useAuthActionContext,\n  IdentificationVerificationProvider,\n  SignInProvider,\n  OpenIdSignInProvider,\n  Button,\n  VisibleComponent,\n  AgeVerificationProvider,\n} from '@shopby/react-components';\nimport { isAgeVerified } from '@shopby/shared';\n\nimport IdentificationVerificationBtn from '../../components/IdentificationVerificationBtn/IdentificationVerificationBtn';\nimport useLayoutChanger from '../../hooks/useLayoutChanger';\nimport SignInForm from '../SignIn/SignInForm';\n\nconst AdultCertificationButton = () => {\n  const location = useLocation();\n\n  const handleSubmit = () => {\n    window.location.replace(location.state?.from ?? '/', {\n      state: {\n        ...location.state,\n      },\n    });\n  };\n\n  useEffect(() => {\n    if (isAgeVerified()) {\n      window.location.replace(location.state?.from ?? '/', {\n        state: {\n          ...location.state,\n        },\n      });\n    }\n  }, [isAgeVerified]);\n\n  return (\n    <IdentificationVerificationBtn\n      type=\"adultCertification\"\n      className=\"adult-certification__certification-btn\"\n      label=\"회원 성인인증\"\n      theme=\"dark\"\n      onSubmit={handleSubmit}\n    />\n  );\n};\n\nconst SignInForAdultCertification = ({ onSignIn }) => {\n  const location = useLocation();\n\n  // 인트로페이지가 성인인증인 경우 \"뒤로가기 처리\"\n  // 상품 > 성인인증인 경우 \"메인으로가기 처리\"\n  const backPath = location.state?.isIntroPage ? -1 : '/';\n\n  return (\n    <>\n      <Button\n        className=\"adult-certification__exit-button\"\n        label=\"19세 미만 나가기\"\n        onClick={() => {\n          if (backPath === -1) {\n            window.history.go(backPath);\n          } else {\n            window.location.replace(backPath);\n          }\n        }}\n      />\n      <div className=\"l-panel adult-certification__sign-in\">\n        <p className=\"adult-certification__sign-in-title\">회원 로그인</p>\n        <SignInProvider>\n          <OpenIdSignInProvider>\n            <SignInForm usesOnlySignIn={true} onSignIn={onSignIn} />\n          </OpenIdSignInProvider>\n        </SignInProvider>\n      </div>\n    </>\n  );\n};\n\nSignInForAdultCertification.propTypes = {\n  onSignIn: func,\n};\n\nconst AdultCertification = () => {\n  const { isSignedIn } = useAuthActionContext();\n  const [isMember, setIsMember] = useState(isSignedIn());\n\n  useLayoutChanger({\n    hasHomeBtnOnHeader: true,\n    title: '성인 인증',\n  });\n\n  useEffect(() => {\n    isMember && isAgeVerified();\n  }, []);\n\n  return (\n    <div className=\"adult-certification\">\n      <div className=\"adult-certification__image bg bg--adult\"></div>\n      <p className=\"adult-certification__title\">\n        성인인증이 필요한\n        <br />\n        서비스입니다.\n      </p>\n      <p className=\"adult-certification__description\">\n        본 상품 및 내용은{' '}\n        <span className=\"highlight\">\n          청소년에게 유해한 정보를 <br />\n          포함하고있어 성인인증 절차를 거쳐야 합니다.\n        </span>\n        <br />본 상품 및 내용은 청소년유해매체물로서 정보통신망이용촉진 및 정보보호 등에 관한 법률 및 청소년 보호법의\n        규정에 의하여 19세 미만의 청소년이 이용, 구매할 수 없습니다.\n      </p>\n      <VisibleComponent\n        shows={isMember}\n        TruthyComponent={\n          <AgeVerificationProvider>\n            <IdentificationVerificationProvider>\n              <Button\n                className=\"adult-certification__certification-btn\"\n                label=\"19세 미만 나가기\"\n                onClick={() => {\n                  window.location.replace('/');\n                }}\n              />\n              <AdultCertificationButton />\n            </IdentificationVerificationProvider>\n          </AgeVerificationProvider>\n        }\n        FalsyComponent={<SignInForAdultCertification onSignIn={() => setIsMember(true)} />}\n      />\n    </div>\n  );\n};\nexport default AdultCertification;\n","import AdultCertification from './AdultCertification';\n\nexport default AdultCertification;\n"],"names":[],"sourceRoot":""}