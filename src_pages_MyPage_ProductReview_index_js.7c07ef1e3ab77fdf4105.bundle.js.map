{"version":3,"file":"src_pages_MyPage_ProductReview_index_js.7c07ef1e3ab77fdf4105.bundle.js","mappings":";;;;;;;;;;;;;;;;AAAA;;;;;;;;;;;;;;;;;;;ACAA;;;;;;;;;;;;;;;;;;;ACAA;;;;;;;;;;;;;;;;;;;ACAA;;;;;;;;;;;;;;;;;;;ACAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAIA;AACA;AAAA;AAIA;AACA;AAAA;AACA;AAAA;AAGA;AAEA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AAEA;AACA;AAEA;AAEA;AACA;AACA;;;;;;;;;;;;;;;;ACxDA;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AAAA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;;;;;;;;;;;;;;;;;;;;;;AC7BA;AAEA;AAUA;AAEA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAGA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAEA;AACA;AAAA;AACA;AAAA;AAEA;AAAA;AAAA;AAEA;AACA;AACA;AAEA;AACA;AAAA;AAIA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAKA;AACA;AACA;AACA;AAAA;AAEA;AAAA;AACA;AAAA;AAQA;AAEA;;;;;;;;;;;;;;;AC5EA;AAEA","sources":["webpack://@shopby/react-skin/./node_modules/@shopby/react-components/dist/esm/common/Tabs/Tabs.js","webpack://@shopby/react-skin/./node_modules/@shopby/react-components/dist/esm/common/Tabs/TabsProvider.js","webpack://@shopby/react-skin/./node_modules/@shopby/react-components/dist/esm/display/ProductReviewFormProvider/ProductReviewFormProvider.js","webpack://@shopby/react-skin/./node_modules/@shopby/react-components/dist/esm/display/ProductReviewProvider/ProductReviewProvider.js","webpack://@shopby/react-skin/./node_modules/@shopby/react-components/dist/esm/display/ProfileProductReviewProvider/ProfileProductReviewProvider.js","webpack://@shopby/react-skin/./src/components/Layout/LayoutProvider.jsx","webpack://@shopby/react-skin/./src/hooks/useLayoutChanger.js","webpack://@shopby/react-skin/./src/pages/MyPage/ProductReview/ProductReview.jsx","webpack://@shopby/react-skin/./src/pages/MyPage/ProductReview/index.js"],"sourcesContent":["var __assign=this&&this.__assign||function(){return __assign=Object.assign||function(t){for(var s,a=1,e=arguments.length;a<e;a++)for(var n in s=arguments[a])Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n]);return t},__assign.apply(this,arguments)};import{jsx as _jsx}from\"react/jsx-runtime\";import{useMemo}from\"react\";import{useTabsActiveContext,useTabsStateContext}from\"./TabsProvider\";var Tab=function(t){var s=t.value,a=t.label,e=useTabsStateContext().currentTab,n=useTabsActiveContext().selectTab,r=useMemo((function(){return e===s}),[e]);return _jsx(\"li\",__assign({className:\"tabs__item \".concat(r?\"on\":\"\")},{children:_jsx(\"button\",__assign({type:\"button\",onClick:function(){return n(s)}},{children:a}))}))},Tabs=function(t){var s=t.className,a=void 0===s?\"\":s,e=useTabsStateContext().tabs;return _jsx(\"ul\",__assign({className:\"tabs \".concat(a)},{children:e.map((function(t){return _jsx(Tab,__assign({},t),t.value)}))}))};export default Tabs;","var __assign=this&&this.__assign||function(){return __assign=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var a in e=arguments[r])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t},__assign.apply(this,arguments)},__read=this&&this.__read||function(t,e){var r=\"function\"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,a,o=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(t){a={error:t}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(a)throw a.error}}return s},__spreadArray=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,a=0,o=e.length;a<o;a++)!n&&a in e||(n||(n=Array.prototype.slice.call(e,0,a)),n[a]=e[a]);return t.concat(n||Array.prototype.slice.call(e))};import{jsx as _jsx}from\"react/jsx-runtime\";import{createContext,useState,useMemo,useContext,useLayoutEffect}from\"react\";import{useSearchParams}from\"react-router-dom\";var TabsStateContext=createContext(null),TabsActionContext=createContext(null),TabsProvider=function(t){var e=t.children,r=t.initialState,n=t.usesQueryParam,a=void 0!==n&&n,o=t.queryParamKeyName,s=void 0===o?\"tabType\":o,u=__read(useSearchParams(),2),i=u[0],c=u[1],l=useMemo((function(){var t,e;return a&&r.tabs.find((function(t){return t.value===i.get(s)}))?i.get(s):null!==(e=null!==(t=r.currentTab)&&void 0!==t?t:r.tabs[0].value)&&void 0!==e?e:null}),[]),f=__read(useState((function(){return r.tabs})),2),_=f[0],v=f[1],d=__read(useState((function(){return l})),2),b=d[0],x=d[1],y=function(t){i.set(s,t),c((function(){return i}),{replace:!0})};useLayoutEffect((function(){a&&l&&y(l)}),[__spreadArray([],__read(i.keys()),!1).length]);var p=useMemo((function(){return{updateTabs:function(t){v((function(){return t}))},selectTab:function(t){x(t),a&&t&&y(t)}}}),[y]);return _jsx(TabsStateContext.Provider,__assign({value:{currentTab:b,tabs:_}},{children:_jsx(TabsActionContext.Provider,__assign({value:p},{children:e}))}))};export default TabsProvider;export var useTabsStateContext=function(){var t=useContext(TabsStateContext);if(!t)throw new Error(\"INVALID_TabsStateContext\");return t};export var useTabsActiveContext=function(){var t=useContext(TabsActionContext);if(!t)throw new Error(\"INVALID_TabsActionContext\");return t};","var __assign=this&&this.__assign||function(){return __assign=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},__assign.apply(this,arguments)},__read=this&&this.__read||function(e,t){var r=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var o,n,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)a.push(o.value)}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return a};import{jsx as _jsx}from\"react/jsx-runtime\";import{createContext,useContext,useMemo,useState}from\"react\";import{executeHelper,displayHelper}from\"@shopby/shared\";var _a=displayHelper.productReviewForm,Helper=_a.Helper,QUERY_KEY=_a.QUERY_KEY,MUTATION_KEY=_a.MUTATION_KEY,DEFAULT_STATE={reviewDetail:{productTotalCount:0,myReview:!1,platformType:\"MOBILE_WEB\",memberName:\"\",content:\"\",providerType:null,productName:\"\",updateYmdt:\"\",bestReviewYn:\"N\",rate:0,imageUrl:\"\",reviewNo:0,nickname:\"\",productNo:0,registerYmdt:\"\",memberId:\"\",brandName:\"\",recommendable:!1,blindReportCnt:0,expelled:!1,reportCnt:0,fileUrls:[],reportable:!1,externalReview:!1,orderedOption:null,recommendCnt:0,commentCount:0,isDeletedProductReview:!1,productDiscountPrice:0,brandNameEn:\"\",productRate:0,givenAccumulationYn:\"N\",extraJson:\"\",registerName:\"\",registerNo:0},reviewableOption:{items:[],reviewable:!1}},ProductReviewFormStateContext=createContext(null),ProductReviewFormActionContext=createContext(null),ProductReviewFormProvider=function(e){var t=e.children,r=__read(useState(DEFAULT_STATE.reviewDetail),2),o=r[0],n=r[1],i=__read(useState(DEFAULT_STATE.reviewableOption),2),a=i[0],u=i[1],c=useMemo((function(){return executeHelper(new Helper)}),[]),_=c.executeQuery,l=c.executeMutation,d=l(MUTATION_KEY.POST_REVIEW_BY_PRODUCT_NO).mutate,s=l(MUTATION_KEY.PUT_REVIEW_BY_PRODUCT_NO_AND_REVIEW_NO).mutate,v=l(MUTATION_KEY.DELETE_REVIEW_BY_PRODUCT_NO_AND_REVIEW_NO).mutate,m=useMemo((function(){return{fetchReviewBy:function(e){return _(QUERY_KEY.QUERY_REVIEW_BY_PRODUCT_NO_AND_REVIEW_NO,{payload:e,onSuccess:function(e){var t=e.data;n(t)}})},fetchReviewableOptionsBy:function(e){return _(QUERY_KEY.QUERY_REVIEWABLE_OPTIONS_BY_PRODUCT_NO,{payload:e,onSuccess:function(e){var t=e.data,r=t.item,o=t.reviewable;u({items:r,reviewable:o})}})},postReviewBy:function(e){return d({payload:e})},putReviewBy:function(e){return s({payload:e})},deleteReviewBy:function(e){return v({payload:e})}}}),[]);return _jsx(ProductReviewFormStateContext.Provider,__assign({value:{reviewDetail:o,reviewableOption:a}},{children:_jsx(ProductReviewFormActionContext.Provider,__assign({value:m},{children:t}))}))};export var useProductReviewFormStateContext=function(){var e=useContext(ProductReviewFormStateContext);if(!e)throw new Error(\"INVALID_ProductReviewFormStateContext\");return e};export var useProductReviewFormActionContext=function(){var e=useContext(ProductReviewFormActionContext);if(!e)throw new Error(\"INVALID_ProductReviewFormActionContext\");return e};export default ProductReviewFormProvider;","var __assign=this&&this.__assign||function(){return __assign=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},__assign.apply(this,arguments)},__read=this&&this.__read||function(e,t){var r=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i};import{jsx as _jsx}from\"react/jsx-runtime\";import{createContext,useContext,useEffect,useMemo,useState}from\"react\";import{displayHelper,executeHelper}from\"@shopby/shared/helpers\";var _a=displayHelper.productReview,Helper=_a.Helper,QUERY_KEY=_a.QUERY_KEY,DEFAULT_STATE={rate:0,totalCount:0,reviewRatingResponses:[],reviews:[],lastPage:0,percentageRating:0,reviewConfig:{canReply:!1,boardType:null,boardImageType:null,description:\"\",boardUsable:!1,canAttach:!1,expandedReviewConfig:null,memberWriteable:!1,secretUsable:!1,name:\"\",canComment:!1,guestWriteable:!1,reviewAccumulationInfo:null}},ProductReviewStateContext=createContext(null),ProductReviewActionContext=createContext(null),ProductReviewProvider=function(e){var t=e.children,r=e.productNo,n=__read(useState(DEFAULT_STATE.rate),2),o=n[0],a=n[1],i=__read(useState(DEFAULT_STATE.totalCount),2),u=i[0],s=i[1],c=__read(useState(DEFAULT_STATE.reviewRatingResponses),2),l=c[0],_=c[1],v=__read(useState(DEFAULT_STATE.reviews),2),d=v[0],f=v[1],p=__read(useState(DEFAULT_STATE.reviewConfig),2),R=p[0],w=p[1],C=useMemo((function(){return executeHelper(new Helper({productNo:r}))}),[]).executeQuery,E=useMemo((function(){return{searchReviews:function(e){return C(QUERY_KEY.QUERY_PRODUCT_REVIEWS,{enabled:r>0,payload:__assign({productNo:r},e),onSuccess:function(e){var t=e.data,r=t.rate,n=t.totalCount,o=t.reviewRatingResponses,i=t.reviews;a(r),s(n),_((function(){return o})),f((function(){return i}))}})},fetchConfiguration:function(){return C(QUERY_KEY.QUERY_PRODUCT_REVIEW_CONFIGURATION,{onSuccess:function(e){var t=e.data;w(t)}})}}}),[]);return useEffect((function(){r>0&&E.fetchConfiguration()}),[r]),_jsx(ProductReviewStateContext.Provider,__assign({value:{rate:o,totalCount:u,reviewRatingResponses:l,reviews:d,reviewConfig:R}},{children:_jsx(ProductReviewActionContext.Provider,__assign({value:E},{children:t}))}))};export default ProductReviewProvider;export var useProductReviewStateContext=function(){var e=useContext(ProductReviewStateContext);if(!e)throw Error(\"INVALID_ProductReviewStateContext\");return e};export var useProductReviewActionContext=function(){var e=useContext(ProductReviewActionContext);if(!e)throw Error(\"INVALID_ProductReviewActionContext\");return e};","var __assign=this&&this.__assign||function(){return __assign=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},__assign.apply(this,arguments)},__read=this&&this.__read||function(e,t){var r=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var o,i,n=r.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(o=n.next()).done;)u.push(o.value)}catch(e){i={error:e}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}return u};import{jsx as _jsx}from\"react/jsx-runtime\";import{createContext,useContext,useMemo,useState}from\"react\";import{displayHelper,executeHelper}from\"@shopby/shared\";var _a=displayHelper.profileProductReview,Helper=_a.Helper,QUERY_KEY=_a.QUERY_KEY,DEFAULT_STATE={reviewableProduct:{totalCount:0,items:[]},reviewedProduct:{totalCount:0,items:[]}},ProfileProductReviewStateContext=createContext(null),ProfileProductReviewActionContext=createContext(null),ProfileProductReviewProvider=function(e){var t=e.children,r=__read(useState(DEFAULT_STATE.reviewableProduct),2),o=r[0],i=r[1],n=__read(useState(DEFAULT_STATE.reviewedProduct),2),u=n[0],a=n[1],c=useMemo((function(){return executeHelper(new Helper)}),[]).executeQuery,l=useMemo((function(){return{fetchProfileReviewableProducts:function(e){return c(QUERY_KEY.QUERY_PROFILE_REVIEWABLE_PRODUCTS,{payload:e,onSuccess:function(e){var t=e.data;i(t)}})},fetchProfileReviewedProducts:function(e){return c(QUERY_KEY.QUERY_PROFILE_PRODUCT_REVIEWS,{payload:e,onSuccess:function(e){var t=e.data;a(t)}})}}}),[]);return _jsx(ProfileProductReviewStateContext.Provider,__assign({value:{reviewableProduct:o,reviewedProduct:u}},{children:_jsx(ProfileProductReviewActionContext.Provider,__assign({value:l},{children:t}))}))};export default ProfileProductReviewProvider;export var useProfileProductReviewStateContext=function(){var e=useContext(ProfileProductReviewStateContext);if(!e)throw Error(\"INVALID_ProfileProductReviewStateContext\");return e};export var useProfileProductReviewActionContext=function(){var e=useContext(ProfileProductReviewActionContext);if(!e)throw Error(\"INVALID_ProfileProductReviewActionContext\");return e};","import { useContext, useMemo, useState, createContext } from 'react';\n\nimport { oneOfType, node, element } from 'prop-types';\n\nexport const LAYOUT_DEFAULT_STATE = {\n  isMain: false,\n  hasBackBtnOnHeader: false,\n  hasHomeBtnOnHeader: false,\n  hasCartBtnOnHeader: false,\n  hasSearchKeywordHeader: false,\n  hasCancelBtnOnHeader: false,\n  hasBottomNav: false,\n  title: '',\n};\n\nconst LayoutActionContext = createContext(null);\nconst LayoutValueContext = createContext(null);\n\nconst LayoutProvider = ({ children }) => {\n  const [layoutStatus, setLayoutStatus] = useState(LAYOUT_DEFAULT_STATE);\n  const action = useMemo(\n    () => ({\n      changeLayoutStatus: (layoutStatus) =>\n        setLayoutStatus({\n          ...LAYOUT_DEFAULT_STATE,\n          ...layoutStatus,\n        }),\n    }),\n    [setLayoutStatus]\n  );\n\n  return (\n    <LayoutActionContext.Provider value={action}>\n      <LayoutValueContext.Provider value={layoutStatus}>{children}</LayoutValueContext.Provider>\n    </LayoutActionContext.Provider>\n  );\n};\n\nexport const useLayoutActionContext = () => {\n  const context = useContext(LayoutActionContext);\n  if (!context) throw new Error('INVALID_LayoutActionContext');\n\n  return context;\n};\n\nexport const useLayoutValueContext = () => {\n  const context = useContext(LayoutValueContext);\n  if (!context) throw new Error('INVALID_LayoutValueContext');\n\n  return context;\n};\n\nexport default LayoutProvider;\n\nLayoutProvider.propTypes = {\n  children: oneOfType([node, element]).isRequired,\n};\n","import { useEffect } from 'react';\n\nimport { LAYOUT_DEFAULT_STATE, useLayoutActionContext } from '../components/Layout/LayoutProvider';\n\n/**\n * 레이아웃의 헤더 및 푸터 형태 설정을 할 수 있는 커스텀 훅.\n * 인자 객체로 담지 않은 값들은 기본 값으로 설정됩니다.\n *\n * [기본 값]\n * isMain: false,\n * hasBackBtnOnHeader: false,\n * hasHomeBtnOnHeader: false,\n * hasCartBtnOnHeader: false,\n * hasBottomNav: false,\n * hasCancelBtnOnHeader: false,\n * title: '',\n * @param {{ isMain?: boolean, hasHomeBtnOnHeader?: boolean, hasBackBtnOnHeader?: boolean, hasCartBtnOnHeader?: boolean, hasCancelBtnOnHeader?: boolean, hasBottomNav?: boolean, title?: string }} layoutStatus\n */\n\nconst useLayoutChanger = (layoutStatus = LAYOUT_DEFAULT_STATE) => {\n  const { changeLayoutStatus } = useLayoutActionContext();\n\n  useEffect(() => {\n    if (changeLayoutStatus) {\n      changeLayoutStatus(layoutStatus);\n    }\n  }, [changeLayoutStatus, layoutStatus]);\n};\n\nexport default useLayoutChanger;\n","import { Suspense, lazy, useMemo, useEffect } from \"react\";\n\nimport {\n  ProfileProductReviewProvider,\n  TabsProvider,\n  ProductReviewProvider,\n  ProductReviewFormProvider,\n  useTabsStateContext,\n  useProductReviewActionContext,\n  Tabs,\n} from \"@shopby/react-components\";\n\nimport useLayoutChanger from \"../../../hooks/useLayoutChanger\";\n\nconst DEFAULT_TABS = [\n  {\n    value: \"REVIEWABLE\",\n    label: \"작성 가능 후기\",\n  },\n  {\n    value: \"REVIEWED\",\n    label: \"작성 완료 후기\",\n  },\n];\n\nconst LAZY_COMPONENT_MAP = {\n  REVIEWABLE: lazy(() => import(\"./ReviewableProduct\")),\n  REVIEWED: lazy(() => import(\"./ReviewedProduct\")),\n};\n\nconst ProductReviewContent = () => {\n  const { currentTab } = useTabsStateContext();\n  const { fetchConfiguration } = useProductReviewActionContext();\n\n  const Component = useMemo(() => LAZY_COMPONENT_MAP[currentTab], [currentTab]);\n\n  useEffect(() => {\n    fetchConfiguration();\n  }, []);\n\n  return (\n    <Suspense fallback={null}>\n      <Component />\n    </Suspense>\n  );\n};\n\nconst ProductReview = () => {\n  useLayoutChanger({\n    hasBackBtnOnHeader: true,\n    title: \"상품후기 관리\",\n    hasCartBtnOnHeader: true,\n    hasBottomNav: true,\n  });\n\n  return (\n    <ProfileProductReviewProvider>\n      <ProductReviewProvider>\n        <ProductReviewFormProvider>\n          <TabsProvider\n            initialState={{\n              currentTab: \"REVIEWABLE\",\n              tabs: DEFAULT_TABS,\n            }}\n          >\n            <div className=\"profile-product-review\">\n              <Tabs className=\"profile-product-review__tabs\" />\n              <ProductReviewContent />\n            </div>\n          </TabsProvider>\n        </ProductReviewFormProvider>\n      </ProductReviewProvider>\n    </ProfileProductReviewProvider>\n  );\n};\n\nexport default ProductReview;\n","import ProductReview from './ProductReview';\n\nexport default ProductReview;\n"],"names":[],"sourceRoot":""}