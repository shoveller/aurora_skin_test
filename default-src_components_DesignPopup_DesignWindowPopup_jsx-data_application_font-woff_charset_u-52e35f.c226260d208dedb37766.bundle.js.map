{"version":3,"file":"default-src_components_DesignPopup_DesignWindowPopup_jsx-data_application_font-woff_charset_u-52e35f.c226260d208dedb37766.bundle.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AAEA;AAEA;AAMA;AAEA;AACA;AAEA;AACA;AAEA;AAEA;AACA;AAAA;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AACA;AAEA;AAcA;AAbA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAEA;AAEA;AACA;AACA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAKA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AAEA;AAAA;AACA;AACA;AAEA;AAEA;AAAA;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAGA;AAEA;AAOA;AACA;AAEA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAGA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAIA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAEA;AACA;AACA;AAKA;AACA;AACA;AACA;AACA;AAEA;AAAA;AACA;AACA;AACA;AAEA;AACA;AAEA;AAEA;AAEA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAIA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;AC1SA;AAEA;AACA;AAEA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAGA;AACA;AACA;AACA;AAAA;AAGA;AACA;AACA;AACA;AACA;AAAA;AAGA;AACA;AACA;AACA;AAAA;AAGA;AAGA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;;;;;;;;;;;;;;;;;;AC9DA;AAEA;AAEA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAEA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAEA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAKA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;ACxDA;AAEA;AAEA;AAEA;AAOA;AALA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAIA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AACA;AACA;AACA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAEA;AAAA;AAAA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AAEA;AAAA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAEA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;AClGA;AAEA;AAEA;AAEA;AACA;AAAA;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAIA;AAGA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpDA;AACA;AAEA;AAEA;AAEA;AAEA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAEA;AAKA;AACA;AACA;AACA;AACA;AAEA;AAEA;AAGA;AAEA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAGA;AAEA;;;;;;;;;;;;;;;;AC/DA;AAEA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAGA;AACA;AACA;AACA;AACA;AAEA;;;;;;;;;;;;;;ACxBA;AAEA;;;;;;;;;;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;AClCA;AAEA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAHA;AAAA;;AAKA;AACA;AACA;AACA;AACA;AAAA;AAHA;AAAA;;AAKA;AACA;AACA;AACA;AACA;AAAA;AAHA;AAAA;AAKA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AAAA;AACA;AAGA;AACA;AACA;AAEA;AAAA;AACA;AAEA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AAAA;AACA;AAGA;AACA;AACA;AAEA;AAAA;AACA;AAEA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;;;;;;;;;;;;ACtFA;AACA;AACA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA","sources":["webpack://@shopby/react-skin/./src/components/DesignPopup/DesignPopup.jsx","webpack://@shopby/react-skin/./src/components/DesignPopup/DesignPopupMulti.jsx","webpack://@shopby/react-skin/./src/components/DesignPopup/DesignPopupMultiMain.jsx","webpack://@shopby/react-skin/./src/components/DesignPopup/DesignPopupMultiSubject.jsx","webpack://@shopby/react-skin/./src/components/DesignPopup/DesignPopupNormal.jsx","webpack://@shopby/react-skin/./src/components/DesignPopup/DesignWindowPopup.jsx","webpack://@shopby/react-skin/./src/components/Sanitized/Sanitized.jsx","webpack://@shopby/react-skin/./src/components/Sanitized/index.js","webpack://@shopby/react-skin/./src/constants/designPopup.js","webpack://@shopby/react-skin/./src/hooks/useDragAndDrop.js","webpack://@shopby/react-skin/./src/utils/design.js"],"sourcesContent":["import { useEffect, useMemo, useRef } from 'react';\nimport { useLocation } from 'react-router-dom';\n\nimport { func, number, string, bool, shape, oneOf, arrayOf, object } from 'prop-types';\n\nimport {\n  Button,\n  VisibleComponent,\n  useDesignPopupStateContext,\n  useDesignPopupActionContext,\n} from '@shopby/react-components';\nimport { isSignedIn } from '@shopby/shared';\n\nimport useDragAndDrop from '../../hooks/useDragAndDrop';\nimport { getPageTypeInformation } from '../../utils/design';\n\nimport DesignPopupMulti from './DesignPopupMulti';\nimport DesignPopupNormal from './DesignPopupNormal';\n\nconst popupHeightMap = new Map();\n\nconst SIZE_CALCULATOR = {\n  PERCENT: ({ screenWidth, screenHeight }) => {\n    const width = (window.innerWidth * screenWidth) / 100;\n    const height = (window.innerHeight * screenHeight) / 100;\n\n    return {\n      width,\n      height,\n    };\n  },\n  PIXEL: ({ screenWidth, screenHeight }) => ({\n    width: screenWidth,\n    height: screenHeight,\n  }),\n};\n\nexport const DesignPopupItem = ({\n  className = '',\n  isWindowPopup = false,\n  onDeleteClick,\n  onVisibleTodayClick,\n  content,\n  detailInfo,\n  popupDesignType,\n  popupNo,\n  popupSlideInfo,\n  usesVisibleTodayOption,\n  isFixedTop,\n  canDrag,\n  refs = {},\n}) => {\n  const detailRef = useRef();\n\n  const { position, handleDragStart, handleDrag, handleDragOver, handleDragEnd } = useDragAndDrop({\n    initialLeft: detailInfo.screenLeftPosition,\n    initialTop: detailInfo.screenTopPosition,\n  });\n\n  const style = useMemo(() => {\n    if (!isFixedTop) return {};\n\n    return {\n      left: 0,\n      top: 0,\n      paddingLeft: detailInfo.screenLeftPosition,\n      paddingTop: detailInfo.screenTopPosition,\n      width: '100%',\n      boxShadow: 'none',\n      border: 'none',\n      zIndex: 6,\n    };\n  }, [detailInfo]);\n\n  const handleDeleteClick = (popupNo) => {\n    onDeleteClick(popupNo);\n\n    if (isFixedTop) {\n      popupHeightMap['delete'](popupNo);\n      const greatestHeight = [...popupHeightMap.values()]?.sort((a, b) => b - a)?.at(0) ?? 0;\n      refs.pageInnerRef.current.style.marginTop = `${greatestHeight}px`;\n    }\n\n    if (isWindowPopup) {\n      window.close();\n    }\n  };\n\n  const handleVisibleTodayClick = (popupNo) => {\n    onVisibleTodayClick(popupNo);\n\n    handleDeleteClick(popupNo);\n  };\n\n  useEffect(() => {\n    if (!detailRef?.current) return;\n    if (!isFixedTop) return;\n\n    popupHeightMap.set(popupNo, detailRef.current.clientHeight);\n\n    const greatestHeight = [...popupHeightMap.values()]?.sort((a, b) => b - a)?.at(0) ?? 0;\n    refs.pageInnerRef.current.style.marginTop = `${greatestHeight}px`;\n  }, []);\n\n  useEffect(() => {\n    if (detailInfo.screenType === 'WINDOW' && !isWindowPopup) {\n      const windowOption = {\n        toolbar: 'no',\n        status: 'no',\n        statusbar: 'no',\n        menubar: 'no',\n        scrollbars: 'no',\n        resizable: 'yes',\n        location: 'yes',\n        left: detailInfo.screenLeftPosition,\n        top: detailInfo.screenTopPosition,\n        width: SIZE_CALCULATOR[detailInfo.screenWidthUnit](detailInfo).width,\n        height: SIZE_CALCULATOR[detailInfo.screenHeightUnit](detailInfo).height + 42,\n      };\n\n      const windowOptionStr = Object.entries(windowOption)\n        .map(([key, value]) => `${key}=${value}`)\n        .join(', ');\n\n      window.name = '';\n\n      window.open(\n        `/design-popup?popupNo=${popupNo}&pathname=${encodeURIComponent(\n          location.pathname\n        )}&parameter=${encodeURIComponent(location.search)}`,\n        `design-popup-${popupNo}`,\n        windowOptionStr\n      );\n    }\n  }, []);\n\n  if (detailInfo.screenType === 'WINDOW' && !isWindowPopup) return <></>;\n\n  return (\n    <div\n      ref={detailRef}\n      draggable={canDrag}\n      className={`design-popup ${className}`}\n      onDragStart={handleDragStart}\n      onDrag={handleDrag}\n      onDragOver={handleDragOver}\n      onDragEnd={handleDragEnd}\n      style={{ ...position, ...style }}\n    >\n      <VisibleComponent\n        key={popupNo}\n        shows={popupDesignType === 'MULTI'}\n        TruthyComponent={\n          <DesignPopupMulti {...popupSlideInfo}>\n            <div className=\"design-popup__btns\" style={{ width: `${popupSlideInfo.slideMaxWidth}px` }}>\n              <VisibleComponent\n                shows={usesVisibleTodayOption}\n                TruthyComponent={\n                  <Button label=\"오늘 하루 보이지 않음\" onClick={() => handleVisibleTodayClick(popupNo)} />\n                }\n              />\n              <Button className=\"design-popup__btn--close\" label=\"닫기\" onClick={() => handleDeleteClick(popupNo)} />\n            </div>\n          </DesignPopupMulti>\n        }\n        FalsyComponent={\n          <DesignPopupNormal content={content} {...detailInfo}>\n            <div className=\"design-popup__btns\" style={{ width: `${detailInfo.screenWidth}px` }}>\n              <VisibleComponent\n                shows={usesVisibleTodayOption}\n                TruthyComponent={\n                  <Button label=\"오늘 하루 보이지 않음\" onClick={() => handleVisibleTodayClick(popupNo)} />\n                }\n              />\n              <Button className=\"design-popup__btn--close\" label=\"닫기\" onClick={() => handleDeleteClick(popupNo)} />\n            </div>\n          </DesignPopupNormal>\n        }\n      />\n    </div>\n  );\n};\nDesignPopupItem.displayName = 'DesignPopupItem';\n\nDesignPopupItem.propTypes = {\n  className: string,\n  onDeleteClick: func,\n  onVisibleTodayClick: func,\n  content: string,\n  detailInfo: shape({\n    bgColor: string,\n    canResize: bool,\n    screenHeight: number,\n    screenHeightUnit: oneOf(['PIXEL', 'PERCENT']),\n    screenLeftPosition: number,\n    screenTopPosition: number,\n    screenType: oneOf(['FIXED', 'FIXED_TOP', 'LAYER', 'WINDOW']),\n    screenWidth: number,\n    screenWidthUnit: oneOf(['PIXEL', 'PERCENT']),\n  }),\n  mallNo: number,\n  popupDesignType: oneOf(['NORMAL', 'MULTI']),\n  popupNo: number,\n  popupSlideInfo: shape({\n    slideSpeed: oneOf([1, 2, 3, 4, 5, 6, 7, 8, 9]),\n    slideMinWidth: number,\n    slideMinHeight: number,\n    slideMaxWidth: number,\n    slideMaxHeight: number,\n    canResize: bool,\n    slideCount: oneOf(['TWO_BY_ONE', 'THREE_BY_ONE', 'FOUR_BY_ONE', 'TWO_BY_TWO', 'THREE_BY_TWO', 'FOUR_BY_TWO']),\n    slideDirection: oneOf(['FIXED', 'RIGHT', 'LEFT', 'UP', 'DOWN']),\n    slideImages: arrayOf(\n      shape({\n        hasUploaded: bool,\n        landingUrl: string,\n        mainImageUrl: string,\n        openLocationTarget: oneOf(['SELF', 'BLANK']),\n        popupImageNo: number,\n        thumbImageUrl: string,\n        thumbImageUrlOnOver: string,\n      })\n    ),\n  }),\n  title: string,\n  usesVisibleTodayOption: bool,\n  isFixedTop: bool,\n  canDrag: bool,\n  refs: shape({\n    designPopupRef: object,\n    pageRef: object,\n    pageInnerRef: object,\n  }),\n  isWindowPopup: bool,\n};\n\nconst DesignPopup = ({ refs }) => {\n  const location = useLocation();\n  const { designPopups, displayPopups } = useDesignPopupStateContext();\n  const { fetchDesignPopups, fetchDisplayPopups, putVisibleTodayBy, deleteDesignPopupBy } =\n    useDesignPopupActionContext();\n\n  const popups = useMemo(() => [...designPopups, ...displayPopups], [designPopups, displayPopups]);\n\n  useEffect(() => {\n    const pageTypeInformation = getPageTypeInformation();\n    pageTypeInformation &&\n      fetchDisplayPopups({\n        ...pageTypeInformation,\n      });\n\n    fetchDesignPopups({\n      displayUrl: location.pathname,\n      parameter: location.search,\n    });\n  }, [location, isSignedIn()]);\n\n  if (!popups?.length) {\n    if (refs?.pageInnerRef?.current) {\n      refs.pageInnerRef.current.style.marginTop = `${0}px`;\n    }\n\n    return <></>;\n  }\n\n  return (\n    <div>\n      {popups.map((designPopup) => (\n        <DesignPopupItem\n          refs={refs}\n          key={designPopup.popupNo}\n          {...designPopup}\n          isFixedTop={designPopup.detailInfo.screenType === 'FIXED_TOP'}\n          canDrag={designPopup.detailInfo.screenType === 'LAYER'}\n          onDeleteClick={(popupNo) => {\n            deleteDesignPopupBy({\n              popupNo,\n            });\n          }}\n          onVisibleTodayClick={(popupNo) => {\n            putVisibleTodayBy({\n              popupNo,\n              shouldHide: true,\n            });\n          }}\n        />\n      ))}\n    </div>\n  );\n};\n\nexport default DesignPopup;\n\nDesignPopup.propTypes = {\n  refs: shape({\n    pageRef: object,\n    pageInnerRef: object,\n  }),\n};\n","import { number, string, bool, shape, oneOf, arrayOf, node } from 'prop-types';\n\nimport DesignPopupMultiMain from './DesignPopupMultiMain';\nimport DesignPopupMultiSubject from './DesignPopupMultiSubject';\n\nconst DesignPopupMulti = ({\n  slideMinWidth,\n  slideMinHeight,\n  slideMaxWidth,\n  slideMaxHeight,\n  slideSpeed,\n  slideImages,\n  slideCount,\n  slideDirection,\n  children,\n}) => (\n  <div\n    className=\"design-popup__content\"\n    style={{\n      width: `${slideMaxWidth}px`,\n    }}\n  >\n    <DesignPopupMultiMain\n      slideImages={slideImages}\n      slideMaxWidth={slideMaxWidth}\n      slideMaxHeight={slideMaxHeight}\n      slideDirection={slideDirection}\n      slideSpeed={slideSpeed}\n    />\n    <DesignPopupMultiSubject\n      slideImages={slideImages}\n      slideCount={slideCount}\n      slideMinWidth={slideMinWidth}\n      slideMinHeight={slideMinHeight}\n    />\n    {children}\n  </div>\n);\n\nexport default DesignPopupMulti;\n\nDesignPopupMulti.propTypes = {\n  children: node,\n  slideSpeed: oneOf([1, 2, 3, 4, 5, 6, 7, 8, 9]),\n  slideMinWidth: number,\n  slideMinHeight: number,\n  slideMaxWidth: number,\n  slideMaxHeight: number,\n  canResize: bool,\n  slideCount: oneOf(['TWO_BY_ONE', 'THREE_BY_ONE', 'FOUR_BY_ONE', 'TWO_BY_TWO', 'THREE_BY_TWO', 'FOUR_BY_TWO']),\n  slideDirection: oneOf(['FIXED', 'RIGHT', 'LEFT', 'UP', 'DOWN']),\n  slideImages: arrayOf(\n    shape({\n      hasUploaded: bool,\n      landingUrl: string,\n      mainImageUrl: string,\n      openLocationTarget: oneOf(['SELF', 'BLANK']),\n      popupImageNo: number,\n      thumbImageUrl: string,\n      thumbImageUrlOnOver: string,\n    })\n  ),\n};\n","import { number, string, bool, shape, oneOf, arrayOf } from 'prop-types';\n\nimport { Slide, Slider } from '@shopby/react-components';\n\nimport { SLIDE_DIRECTION_MAP } from '../../constants/designPopup';\n\nconst DesignPopupMultiMain = ({ slideMaxWidth, slideMaxHeight, slideDirection, slideSpeed, slideImages }) => {\n  const mainUrls = slideImages.map(({ mainImageUrl, popupImageNo }) => ({\n    mainImageUrl,\n    popupImageNo: `main_${popupImageNo}`,\n  }));\n\n  const { effect, direction, reverseDirection } = SLIDE_DIRECTION_MAP[slideDirection];\n\n  return (\n    <div height={`${slideMaxHeight}px`}>\n      <Slider\n        autoHeight={true}\n        effect={effect}\n        direction={direction}\n        autoplay={{\n          delay: (slideSpeed ?? 1) * 1000 || 2500,\n          reverseDirection,\n        }}\n        loop={true}\n        slidesPerView=\"auto\"\n      >\n        {mainUrls?.map((main) => (\n          <Slide key={main.popupImageNo}>\n            <img src={main.mainImageUrl} width={`${slideMaxWidth}px`} height={`${slideMaxHeight}px`} />\n          </Slide>\n        ))}\n      </Slider>\n    </div>\n  );\n};\n\nexport default DesignPopupMultiMain;\n\nDesignPopupMultiMain.propTypes = {\n  canResize: bool,\n  slideSpeed: oneOf([1, 2, 3, 4, 5, 6, 7, 8, 9]),\n  slideMaxWidth: number,\n  slideMaxHeight: number,\n  slideDirection: oneOf(['FIXED', 'RIGHT', 'LEFT', 'UP', 'DOWN']),\n  slideImages: arrayOf(\n    shape({\n      hasUploaded: bool,\n      landingUrl: string,\n      mainImageUrl: string,\n      openLocationTarget: oneOf(['SELF', 'BLANK']),\n      popupImageNo: number,\n      thumbImageUrl: string,\n      thumbImageUrlOnOver: string,\n    })\n  ),\n};\n","import { useState } from 'react';\n\nimport { number, string, bool, shape, oneOf, arrayOf } from 'prop-types';\n\nimport { SLIDE_COUNT_MAP } from '../../constants/designPopup';\n\nconst SubjectItem = ({\n  thumbImageUrl,\n  thumbImageUrlOnOver,\n  landingUrl,\n  openLocationTarget,\n  slideMinWidth,\n  slideMinHeight,\n}) => {\n  const [imageUrl, setImageUrl] = useState(thumbImageUrl);\n\n  const handleMouseEnter = () => {\n    setImageUrl(thumbImageUrlOnOver);\n  };\n\n  const handleMouseLeave = () => {\n    setImageUrl(thumbImageUrl);\n  };\n\n  return (\n    <a href={landingUrl} target={`_${openLocationTarget?.toLowerCase()}`}>\n      <img\n        src={imageUrl}\n        onMouseEnter={handleMouseEnter}\n        onTouchStart={handleMouseEnter}\n        onMouseLeave={handleMouseLeave}\n        onTouchEnd={handleMouseLeave}\n        width={`${slideMinWidth}px`}\n        height={`${slideMinHeight}px`}\n      />\n    </a>\n  );\n};\n\nSubjectItem.propTypes = {\n  thumbImageUrl: string,\n  thumbImageUrlOnOver: string,\n  slideMinWidth: number,\n  slideMinHeight: number,\n  landingUrl: string,\n  openLocationTarget: oneOf(['SELF', 'BLANK']),\n};\n\nconst getGridInformation = (slideCount) => ({\n  gridTemplateRows: `repeat(${SLIDE_COUNT_MAP[slideCount.split('_BY_').at(1)]}, 1fr)`,\n  gridTemplateColumns: `repeat(${SLIDE_COUNT_MAP[slideCount.split('_BY_').at(0)]}, 1fr)`,\n});\n\nconst DesignPopupMultiSubject = ({ slideImages, slideCount, slideMinWidth, slideMinHeight }) => {\n  const thumbImageUrls = slideImages.map(({ thumbImageUrl, thumbImageUrlOnOver, popupImageNo, landingUrl }) => ({\n    thumbImageUrl,\n    thumbImageUrlOnOver,\n    popupImageNo: `thumb_${popupImageNo}`,\n    landingUrl,\n  }));\n\n  const { gridTemplateRows, gridTemplateColumns } = getGridInformation(slideCount);\n\n  return (\n    <div\n      className=\"design-popup__thumb-image\"\n      style={{\n        display: 'grid',\n        gridTemplateRows,\n        gridTemplateColumns,\n      }}\n    >\n      {thumbImageUrls?.map((url) => (\n        // console.log(url);\n\n        <SubjectItem key={url.popupImageNo} {...url} slideMinWidth={slideMinWidth} slideMinHeight={slideMinHeight} />\n      ))}\n    </div>\n  );\n};\n\nexport default DesignPopupMultiSubject;\n\nDesignPopupMultiSubject.propTypes = {\n  slideImages: arrayOf(\n    shape({\n      hasUploaded: bool,\n      landingUrl: string,\n      mainImageUrl: string,\n      openLocationTarget: oneOf(['SELF', 'BLANK']),\n      popupImageNo: number,\n      thumbImageUrl: string,\n      thumbImageUrlOnOver: string,\n    })\n  ),\n  slideCount: oneOf(['TWO_BY_ONE', 'THREE_BY_ONE', 'FOUR_BY_ONE', 'TWO_BY_TWO', 'THREE_BY_TWO', 'FOUR_BY_TWO']),\n  slideMinWidth: number,\n  slideMinHeight: number,\n};\n","import { forwardRef } from 'react';\n\nimport { string, oneOf, number, node } from 'prop-types';\n\nimport Sanitized from '../Sanitized';\n\nconst SIZE_CALCULATOR = {\n  PERCENT: ({ screenWidth, screenHeight }) => {\n    const width = (window.innerWidth * screenWidth) / 100;\n    const height = (window.innerHeight * screenHeight) / 100;\n\n    return {\n      width,\n      height,\n    };\n  },\n  PIXEL: ({ screenWidth, screenHeight }) => ({\n    width: screenWidth,\n    height: screenHeight,\n  }),\n};\n\nconst DesignPopupNormal = forwardRef(\n  ({ content, screenWidthUnit, screenHeightUnit, bgColor, screenWidth, screenHeight, children }, ref) => {\n    const style = {\n      background: bgColor,\n      width: `${SIZE_CALCULATOR[screenWidthUnit]({ screenWidth, screenHeight }).width}px`,\n      height: `${SIZE_CALCULATOR[screenHeightUnit]({ screenWidth, screenHeight }).height}px`,\n    };\n\n    return (\n      <div className=\"editor\" ref={ref}>\n        <Sanitized className=\"design-popup__content\" html={content} style={style} />\n        {children}\n      </div>\n    );\n  }\n);\n\nexport default DesignPopupNormal;\n\nDesignPopupNormal.displayName = 'DesignPopupNormal';\n\nDesignPopupNormal.propTypes = {\n  className: string,\n  content: string,\n  screenWidthUnit: oneOf(['PERCENT', 'PIXEL']),\n  screenHeightUnit: oneOf(['PERCENT', 'PIXEL']),\n  bgColor: string,\n  screenWidth: number,\n  screenHeight: number,\n  children: node,\n};\n","import { useMemo, useEffect } from 'react';\nimport { useSearchParams } from 'react-router-dom';\n\nimport { useDesignPopupActionContext, useDesignPopupStateContext } from '@shopby/react-components';\n\nimport { getPageTypeInformation } from '../../utils/design';\n\nimport { DesignPopupItem } from './DesignPopup';\n\nconst DesignWindowPopup = () => {\n  const [searchParams] = useSearchParams();\n  const popupNo = Number(searchParams.get('popupNo'));\n  const pathname = decodeURIComponent(searchParams.get('pathname'));\n  const parameter = decodeURIComponent(searchParams.get('parameter'));\n\n  const { designPopups, displayPopups } = useDesignPopupStateContext();\n  const { deleteDesignPopupBy, putVisibleTodayBy, fetchDesignPopups, fetchDisplayPopups } =\n    useDesignPopupActionContext();\n  const popups = useMemo(() => [...designPopups, ...displayPopups], [designPopups, displayPopups]);\n\n  const designPopup = useMemo(() => popups.find((designPopup) => designPopup.popupNo === popupNo), [popups]);\n\n  useEffect(() => {\n    const pageTypeInformation = getPageTypeInformation();\n\n    pageTypeInformation &&\n      fetchDisplayPopups({\n        ...pageTypeInformation,\n      });\n\n    fetchDesignPopups({\n      pathname,\n      parameter,\n    });\n  }, []);\n\n  if (!designPopup) return <></>;\n\n  return (\n    <DesignPopupItem\n      {...designPopup}\n      detailInfo={{\n        ...designPopup.detailInfo,\n        screenLeftPosition: 0,\n        screenTopPosition: 0,\n      }}\n      className=\"design-popup__window\"\n      isWindowPopup={true}\n      onDeleteClick={(popupNo) => {\n        deleteDesignPopupBy({\n          popupNo,\n        });\n      }}\n      onVisibleTodayClick={(popupNo) => {\n        putVisibleTodayBy({\n          popupNo,\n          shouldHide: true,\n        });\n      }}\n    />\n  );\n};\n\nexport default DesignWindowPopup;\n","import { string, object } from 'prop-types';\n\nconst { sanitize } = require('dompurify');\n\nconst Sanitized = ({ html, style, className = '' }) => (\n  <div\n    className={`editor ${className}`}\n    dangerouslySetInnerHTML={{\n      __html: sanitize(html ?? '', {\n        USE_PROFILES: { html: true },\n        ADD_TAGS: ['iframe', 'a'],\n        ADD_ATTR: ['allow', 'allowfullscreen', 'frameborder', 'scrolling', 'target', 'rel', 'type'],\n      }),\n    }}\n    style={style}\n  />\n);\n\nSanitized.propTypes = {\n  className: string,\n  style: object,\n  html: string,\n};\n\nexport default Sanitized;\n","import Sanitized from './Sanitized';\n\nexport default Sanitized;\n","export const SLIDE_COUNT_MAP = {\n  ONE: 1,\n  TWO: 2,\n  THREE: 3,\n  FOUR: 4,\n  FIVE: 5,\n};\n\nexport const SLIDE_DIRECTION_MAP = {\n  FIXED: {\n    effect: 'fade',\n    direction: 'horizontal',\n    reverseDirection: false,\n  },\n  RIGHT: {\n    effect: 'slide',\n    direction: 'horizontal',\n    reverseDirection: false,\n  },\n  LEFT: {\n    effect: 'slide',\n    direction: 'horizontal',\n    reverseDirection: true,\n  },\n  UP: {\n    effect: 'slide',\n    direction: 'vertical',\n    reverseDirection: false,\n  },\n  DOWN: {\n    effect: 'slide',\n    direction: 'vertical',\n    reverseDirection: true,\n  },\n};\n","import { useState } from 'react';\n\nconst useDragAndDrop = ({ initialLeft, initialTop }) => {\n  // 드리그 전 포지션 값\n  const [originalPosition, setOriginalPosition] = useState({\n    left: 0,\n    top: 0,\n  });\n\n  // 실시간\n  const [realTimePosition, setRealTimePosition] = useState({\n    left: 0,\n    top: 0,\n  });\n\n  // 실제 위치하는 값\n  const [position, setPosition] = useState({\n    left: initialLeft,\n    top: initialTop,\n  });\n\n  const handleDragStart = (event) => {\n    event.stopPropagation();\n\n    // 크롬 초록색 플러스 버튼 아이콘 제거\n    event.dataTransfer.effectAllowed = 'move';\n    const _originalPosition = { ...originalPosition };\n    _originalPosition.left = event.target.offsetLeft;\n    _originalPosition.top = event.target.offsetTop;\n\n    // 드래그 시작 전 위치값 저장\n    setOriginalPosition(() => ({\n      ..._originalPosition,\n    }));\n\n    const _realTimePosition = { ...realTimePosition };\n    _realTimePosition.left = event.clientX;\n    _realTimePosition.top = event.clientY;\n\n    setRealTimePosition(() => ({\n      ..._realTimePosition,\n    }));\n  };\n\n  const handleDrag = (event) => {\n    event.stopPropagation();\n    event.preventDefault();\n    const _pos = { ...position };\n\n    const left = event.target.offsetLeft + event.clientX - realTimePosition.left;\n    const top = event.target.offsetTop + event.clientY - realTimePosition.top;\n    _pos.left = left < 0 ? position.left : left;\n    _pos.top = top < 0 ? position.top : top;\n\n    setPosition(() => ({\n      ..._pos,\n    }));\n\n    const _realTimePosition = { ...realTimePosition };\n    _realTimePosition.left = event.clientX;\n    _realTimePosition.top = event.clientY;\n\n    setRealTimePosition(() => ({\n      ..._realTimePosition,\n    }));\n  };\n\n  const handleDragOver = (event) => {\n    event.preventDefault();\n    event.stopPropagation();\n  };\n\n  const handleDragEnd = (event) => {\n    event.preventDefault();\n    event.stopPropagation();\n  };\n\n  return {\n    handleDragStart,\n    handleDrag,\n    handleDragOver,\n    handleDragEnd,\n    position,\n  };\n};\n\nexport default useDragAndDrop;\n","// eslint-disable-next-line complexity\nexport const getPageTypeInformation = () => {\n  const { pathname, searchParams } = new URL(window.location.href);\n\n  const categoryNo = searchParams.get('categoryNo');\n  if (pathname.includes('products') && categoryNo) {\n    return {\n      pageType: 'CATEGORY',\n      targetNo: categoryNo,\n    };\n  }\n\n  const eventNo = pathname.split('/').filter(Boolean).at(1);\n  if (pathname.includes('event') && eventNo) {\n    return {\n      pageType: 'EVENT',\n      targetNo: eventNo,\n    };\n  }\n\n  const productNo = searchParams.get('productNo');\n  if (pathname.includes('product-detail') && productNo) {\n    return {\n      pageType: 'PRODUCT',\n      targetNo: productNo,\n    };\n  }\n\n  if (pathname === '/') {\n    return {\n      pageType: 'MAIN',\n    };\n  }\n\n  return null;\n};\n"],"names":[],"sourceRoot":""}