{"version":3,"file":"src_pages_SignUpMenu_index_js.063707140303ce6b9824.bundle.js","mappings":";;;;;;;;;;;;;;;;;;;;;AAAA;;;;;;;;;;;;;;ACAA;;;;;;;;;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACNA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAIA;AACA;AAAA;AAIA;AACA;AAAA;AACA;AAAA;AAGA;AAEA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AAEA;AACA;AAEA;AAEA;AACA;AACA;;;;;;;;;;;;;;;;;;;ACxDA;AAEA;AAEA;AAEA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AAAA;AACA;AAAA;AAGA;AAAA;AAEA;AAAA;AACA;AACA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAKA;AAIA;AAGA;AAEA;AAEA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACvDA;AAEA;;;;;;;;;;;;;;;;ACFA;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AAAA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;;;;;;;;;;;;;;;;;;;;AC7BA;AACA;AAEA;AAEA;AACA;AAEA;AACA;AAAA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAEA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAGA;AAAA;AAEA;AAAA;AAAA;AAMA;AAEA;AAEA;;;;;;;;;;;;;;;ACnCA;AAEA","sources":["webpack://@shopby/react-skin/./node_modules/@shopby/react-components/dist/esm/auth/OpenIdSignInProvider/OpenIdSignInProvider.js","webpack://@shopby/react-skin/./node_modules/@shopby/react-components/dist/esm/common/VisibleComponent/VisibleComponent.js","webpack://@shopby/react-skin/./node_modules/@shopby/react-components/dist/esm/utils/provider.js","webpack://@shopby/react-skin/./src/components/Layout/LayoutProvider.jsx","webpack://@shopby/react-skin/./src/components/OpenIdSignIn/OpenIdSignIn.jsx","webpack://@shopby/react-skin/./src/components/OpenIdSignIn/index.js","webpack://@shopby/react-skin/./src/hooks/useLayoutChanger.js","webpack://@shopby/react-skin/./src/pages/SignUpMenu/SignUpMenu.jsx","webpack://@shopby/react-skin/./src/pages/SignUpMenu/index.js"],"sourcesContent":["var __assign=this&&this.__assign||function(){return __assign=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++)for(var a in r=arguments[t])Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a]);return e},__assign.apply(this,arguments)},__read=this&&this.__read||function(e,r){var t=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var n,a,o=t.call(e),i=[];try{for(;(void 0===r||r-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(t=o.return)&&t.call(o)}finally{if(a)throw a.error}}return i},__spreadArray=this&&this.__spreadArray||function(e,r,t){if(t||2===arguments.length)for(var n,a=0,o=r.length;a<o;a++)!n&&a in r||(n||(n=Array.prototype.slice.call(r,0,a)),n[a]=r[a]);return e.concat(n||Array.prototype.slice.call(r))};import{jsx as _jsx}from\"react/jsx-runtime\";import{createContext,useContext,useEffect,useMemo,useState}from\"react\";import{executeHelper,authHelper}from\"@shopby/shared/helpers\";import{TERMS_TYPE}from\"@shopby/shared/types\";import{TermsProvider,useTermsActionContext,useTermsStateContext}from\"../../manage\";import{makeStateUpdater}from\"../../utils\";var DEFAULT_STATE={openIdInfo:{dormantMemberResponse:{memberName:null,mobileNo:null,email:null},provider:\"\",ordinaryMemberResponse:{signUpDateTime:null,email:null}},isAgreement:!1,isKakaosync:!1,profileInfo:{mallName:\"\",memberNo:0,memberGradeName:\"\",memberGroupNames:\"\",memberGroups:[],memberName:\"\",memberId:\"\",mobileNo:\"\",telephoneNo:\"\",memberStatus:\"\",memberType:\"\",principalCertificated:!1,certificationType:\"\",birthday:\"\",sex:\"\",email:\"\",zipCd:\"\",address:\"\",detailAddress:\"\",jibunAddress:\"\",jibunDetailAddress:\"\",nickname:\"\",joinTypeName:\"\",joinYmdt:\"\",lastLoginYmdt:\"\",lastLoginIp:\"\",loginCount:0,pushNotificationAgreed:!1,pushNotificationAgreeYmdt:\"\",pushNotificationDisagreeYmdt:\"\",smsAgreed:!1,smsAgreeYmdt:\"\",smsDisagreeYmdt:\"\",directMailAgreed:!1,directMailAgreeYmdt:\"\",directMailDisagreeYmdt:\"\",countryCd:\"KR\",oauthIdNo:\"\",additionalInfo:\"\",adultCertificated:!1,adultCertificatedYmdt:\"\",refundBank:\"\",refundBankAccount:\"\",refundBankDepositorName:\"\",agreedTerms:[],agreedTermsInfos:[],providerType:\"\",providerTypes:[]},termsInfo:{title:\"\",contents:\"\"},isTermsContentFullModalOpen:!1,termStatus:[],allChecked:!1,kakaosyncSignUpMemberInfo:{id:\"\",password:\"\"}},OpenIdSignInValueContext=createContext(null),OpenIdSignInActionContext=createContext(null),_a=authHelper.auth,Helper=_a.Helper,QUERY_KEY=_a.QUERY_KEY,MUTATION_KEY=_a.MUTATION_KEY,OPTION_TERMS_TYPES={PI_COLLECTION_AND_USE_OPTIONAL:\"개인정보 수집/이용\",PI_PROCESS_CONSIGNMENT:\"개인정보 처리/위탁\",PI_THIRD_PARTY_PROVISION:\"개인정보 제 3자 제공\"},OpenIdSignInProviderContent=function(e){var r=e.children,t=__read(useState(DEFAULT_STATE.openIdInfo),2),n=t[0],a=t[1],o=__read(useState(DEFAULT_STATE.isAgreement),2),i=o[0],s=o[1],d=__read(useState(DEFAULT_STATE.isKakaosync),2),u=d[0],l=d[1],c=__read(useState(DEFAULT_STATE.profileInfo),2),m=c[0],_=c[1],p=__read(useState(DEFAULT_STATE.termsInfo),2),f=p[0],I=p[1],g=__read(useState(DEFAULT_STATE.isTermsContentFullModalOpen),2),T=g[0],h=g[1],S=__read(useState(DEFAULT_STATE.termStatus),2),A=S[0],O=S[1],v=__read(useState(DEFAULT_STATE.allChecked),2),N=v[0],E=v[1],y=__read(useState(DEFAULT_STATE.kakaosyncSignUpMemberInfo),2),b=y[0],C=y[1],P=useTermsActionContext().fetchTerms,U=useTermsStateContext().terms;useEffect((function(){P([\"PI_COLLECTION_AND_USE_OPTIONAL\",\"PI_PROCESS_CONSIGNMENT\",\"PI_THIRD_PARTY_PROVISION\"])}),[]),useEffect((function(){var e=Object.keys(OPTION_TERMS_TYPES).filter((function(e){var r;return null===(r=U[e])||void 0===r?void 0:r.used})),r=null==e?void 0:e.map((function(e){return{id:e.toLowerCase(),label:\"[선택] \".concat(TERMS_TYPE[e]),checked:!1,required:!1,termsType:e}}));O((function(e){return __spreadArray(__spreadArray([],__read(e),!1),__read(r),!1)}))}),[U]);var k=useMemo((function(){return executeHelper(new Helper)}),[]),R=k.executeQuery,M=k.executeMutation,x=M(MUTATION_KEY.POST_PROFILE_OPEN_ID).mutate,Y=M(MUTATION_KEY.POST_PROFILE_OPEN_ID).mutate,D=M(MUTATION_KEY.POST_PROFILE_SYNCHRONIZE).mutate;useMemo((function(){var e=A.filter((function(e){return\"sms\"===e.id})),r=A.filter((function(e){return\"email\"===e.id}));A.every((function(e){return e.checked}))?E(!0):E(!1),_((function(r){return __assign(__assign({},r),{smsAgreed:e.some((function(e){return e.checked}))})})),_((function(e){return __assign(__assign({},e),{directMailAgreed:r.some((function(e){return e.checked}))})}))}),[A]);var L=function(e){void 0===e&&(e=6);var r=\"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ\";return Array.from(Array(e).keys()).reduce((function(e){return e+r.charAt(Math.floor(62*Math.random()))}),\"\")}(),j=useMemo((function(){return{updateIsAgreement:s,updateIsKakaosync:l,updateTermsInfo:makeStateUpdater(I),updateAllChecked:makeStateUpdater(E),updateKakaosyncSignUpMemberInfo:makeStateUpdater(C),updateIsTermsContentFullModalOpen:h,setTermStatus:O,setPathToLocalStorage:function(e){var r=e.previousPath,t=e.orderSheetPath,n=e.nextPath;localStorage.setItem(\"pathData\",JSON.stringify({previousPath:r,nextPath:n,orderSheetPath:t}))},getPathFromLocalStorage:function(){var e;return JSON.parse(null!==(e=localStorage.getItem(\"pathData\"))&&void 0!==e?e:\"\")},removePath:function(){localStorage.removeItem(\"pathData\")},setOauthIdNoToLocalStorage:function(e){localStorage.setItem(\"withdrawalOauthIdNo\",e)},getOauthIdNoToLocalStorage:function(){return localStorage.getItem(\"withdrawalOauthIdNo\")},removeOauthIdNo:function(){localStorage.removeItem(\"withdrawalOauthIdNo\")},setOauthCompareResultToLocalStorage:function(e){localStorage.setItem(\"withdrawalOauthIdNoCompareResult\",JSON.stringify(e))},getOauthCompareResultToLocalStorage:function(){var e;return null!==(e=localStorage.getItem(\"withdrawalOauthIdNoCompareResult\"))&&void 0!==e?e:\"\"},removeOauthCompareResultToLocalStorage:function(){localStorage.removeItem(\"withdrawalOauthIdNoCompareResult\")},openIdSignIn:function(e){var r=e.provider,t=e.redirectUri,n=\"ncp_\".concat(r);return localStorage.setItem(\"provider\",n),localStorage.setItem(\"oauthStateToken\",L),R(QUERY_KEY.QUERY_GET_OAUTH_LOGIN_URL,{payload:{provider:n,state:L,redirectUri:t},onSuccess:function(e){var r=e.data;location.href=r.loginUrl}})},getOauthOpenId:function(e){var r=e.code,t=e.redirectUri,n=localStorage.getItem(\"provider\"),o=localStorage.getItem(\"oauthStateToken\");return R(QUERY_KEY.QUERY_GET_OAUTH_OPEN_ID,{payload:{code:r,redirectUri:t,provider:n,state:o},onSuccess:function(e){var r=e.data;localStorage.removeItem(\"provider\"),localStorage.removeItem(\"oauthStateToken\"),r.dormantMemberResponse?a({dormantMemberResponse:__assign({},r.dormantMemberResponse),provider:r.provider,ordinaryMemberResponse:{signUpDateTime:null,email:null}}):r.ordinaryMemberResponse?a({dormantMemberResponse:{memberName:null,mobileNo:null,email:null},provider:r.provider,ordinaryMemberResponse:__assign({},r.ordinaryMemberResponse)}):a({dormantMemberResponse:{memberName:null,mobileNo:null,email:null},provider:r.provider,ordinaryMemberResponse:{signUpDateTime:null,email:null}})}})},getProfile:function(){return R(QUERY_KEY.QUERY_GET_PROFILE,{onSuccess:function(e){var r=e.data;_(__assign({},r))}})},getTerms:function(e){var r=e.termsTypes;return R(QUERY_KEY.QUERY_GET_TERMS,{payload:{termsTypes:r},onSuccess:function(e){var r=e.data,t=Object.values(r),n=__read(t,1)[0].contents;I((function(e){return __assign(__assign({},e),{contents:n})})),h(!0)}})},openIdSignUp:function(){var e=__spreadArray([],__read(A),!1);if(e.filter((function(e){return e.required})).some((function(e){return!1===e.checked})))return!1;var r=e.filter((function(e){return e.termsType})).filter((function(e){return e.checked})).map((function(e){return e.termsType}));return x({payload:{mobileNo:m.mobileNo,telephoneNo:m.telephoneNo,memberName:m.memberName,birthday:m.birthday,sex:m.sex,email:m.email,zipCd:m.zipCd,address:m.address,detailAddress:m.detailAddress,jibunAddress:m.jibunAddress,jibunDetailAddress:m.jibunDetailAddress,nickname:m.nickname,pushNotificationAgreed:m.pushNotificationAgreed,smsAgreed:m.smsAgreed,directMailAgreed:m.directMailAgreed,joinTermsAgreements:r}})},kakaosyncSignUp:function(){return Y({payload:{mobileNo:m.mobileNo,telephoneNo:m.telephoneNo,memberName:m.memberName,birthday:m.birthday,sex:m.sex,email:m.email,zipCd:m.zipCd,address:m.address,detailAddress:m.detailAddress,jibunAddress:m.jibunAddress,jibunDetailAddress:m.jibunDetailAddress,nickname:m.nickname,pushNotificationAgreed:m.pushNotificationAgreed,smsAgreed:m.smsAgreed,directMailAgreed:m.directMailAgreed}})},synchronizeOpenId:function(e){return D({payload:e})},allCheck:function(e){var r=__spreadArray([],__read(A),!1),t=r.map((function(e){return!1===e.checked?__assign(__assign({},e),{checked:!0}):e})),n=r.map((function(e){return __assign(__assign({},e),{checked:!1})}));O(e?t:n)},singleCheck:function(e){var r=e.isChecked,t=e.label,n=A.findIndex((function(e){return e.label===t})),a=__spreadArray([],__read(A),!1);r?(a[n].checked=!1,O(__spreadArray([],__read(a),!1))):(a[n].checked=!0,O(__spreadArray([],__read(a),!1)))}}}),[A,m]);return _jsx(OpenIdSignInActionContext.Provider,__assign({value:j},{children:_jsx(OpenIdSignInValueContext.Provider,__assign({value:{openIdInfo:n,isAgreement:i,isKakaosync:u,profileInfo:m,termsInfo:f,isTermsContentFullModalOpen:T,termStatus:A,allChecked:N,kakaosyncSignUpMemberInfo:b}},{children:r}))}))},OpenIdSignInProvider=function(e){var r=e.children;return _jsx(TermsProvider,__assign({hasOnlyUsedTerms:!0},{children:_jsx(OpenIdSignInProviderContent,{children:r})}))};export default OpenIdSignInProvider;export var useOpenIdSignInActionContext=function(){var e=useContext(OpenIdSignInActionContext);if(!e)throw new Error(\"INVALID_OpenIdSignInActionContext\");return e};export var useOpenIdSignInValueContext=function(){var e=useContext(OpenIdSignInValueContext);if(!e)throw new Error(\"INVALID_OpenIdSignInValueContext\");return e};","import{Fragment as _Fragment,jsx as _jsx}from\"react/jsx-runtime\";var VisibleComponent=function(n){var t=n.shows,o=n.TruthyComponent,e=n.FalsyComponent,r=void 0===e?_jsx(_Fragment,{}):e;return\"function\"==typeof t&&t()||t?o:r};export default VisibleComponent;","import { cloneDeep, merge } from 'lodash-es';\nvar makeStateUpdater = function (setState) {\n    return function (partialState) {\n        setState(function (prev) { return merge(cloneDeep(prev), partialState); });\n    };\n};\nexport { makeStateUpdater };\n","import { useContext, useMemo, useState, createContext } from 'react';\n\nimport { oneOfType, node, element } from 'prop-types';\n\nexport const LAYOUT_DEFAULT_STATE = {\n  isMain: false,\n  hasBackBtnOnHeader: false,\n  hasHomeBtnOnHeader: false,\n  hasCartBtnOnHeader: false,\n  hasSearchKeywordHeader: false,\n  hasCancelBtnOnHeader: false,\n  hasBottomNav: false,\n  title: '',\n};\n\nconst LayoutActionContext = createContext(null);\nconst LayoutValueContext = createContext(null);\n\nconst LayoutProvider = ({ children }) => {\n  const [layoutStatus, setLayoutStatus] = useState(LAYOUT_DEFAULT_STATE);\n  const action = useMemo(\n    () => ({\n      changeLayoutStatus: (layoutStatus) =>\n        setLayoutStatus({\n          ...LAYOUT_DEFAULT_STATE,\n          ...layoutStatus,\n        }),\n    }),\n    [setLayoutStatus]\n  );\n\n  return (\n    <LayoutActionContext.Provider value={action}>\n      <LayoutValueContext.Provider value={layoutStatus}>{children}</LayoutValueContext.Provider>\n    </LayoutActionContext.Provider>\n  );\n};\n\nexport const useLayoutActionContext = () => {\n  const context = useContext(LayoutActionContext);\n  if (!context) throw new Error('INVALID_LayoutActionContext');\n\n  return context;\n};\n\nexport const useLayoutValueContext = () => {\n  const context = useContext(LayoutValueContext);\n  if (!context) throw new Error('INVALID_LayoutValueContext');\n\n  return context;\n};\n\nexport default LayoutProvider;\n\nLayoutProvider.propTypes = {\n  children: oneOfType([node, element]).isRequired,\n};\n","import { useLocation } from 'react-router-dom';\n\nimport { string, array } from 'prop-types';\n\nimport { VisibleComponent, useOpenIdSignInActionContext } from '@shopby/react-components';\n\nconst OpenIdSignIn = ({ label, orderSheetNo, providers }) => {\n  const { openIdSignIn, setPathToLocalStorage } = useOpenIdSignInActionContext();\n\n  const location = useLocation();\n  const previousPath = location.state?.from; // 로그인 화면 전 페이지\n  const nextPath = location.state?.to; // 로그인 후 이동할 페이지\n  const orderSheetPath = orderSheetNo ? orderSheetNo : '';\n  const redirectUri = `${window.location.origin}/callback/auth-callback`;\n\n  return (\n    <VisibleComponent\n      shows={providers?.length > 0}\n      TruthyComponent={\n        <div className=\"open-id-sign-in\">\n          <p className=\"open-id-sign-in__title\">\n            <span>간편로그인</span>\n          </p>\n          <ul className=\"open-id-sign-in__list\">\n            {providers\n              ?.sort((a, b) => b.charCodeAt(0) - a.charCodeAt(0))\n              .map((provider, idx) => (\n                <li className={`open-id-sign-in__item type-${provider}`} key={`${idx}_${provider}`}>\n                  <button\n                    className=\"open-id-sign-in__link\"\n                    data-provider={provider}\n                    data-action=\"oauth\"\n                    onClick={() => {\n                      setPathToLocalStorage({ previousPath, nextPath, orderSheetPath });\n                      openIdSignIn({ provider, redirectUri });\n                    }}\n                  >\n                    <span>{`${provider?.toUpperCase()} `}</span>\n                    {` 아이디로 ${label}`}\n                  </button>\n                </li>\n              ))}\n          </ul>\n        </div>\n      }\n    />\n  );\n};\n\nexport default OpenIdSignIn;\n\nOpenIdSignIn.propTypes = {\n  label: string,\n  providers: array,\n  orderSheetNo: string,\n};\n","import OpenIdSignIn from './OpenIdSignIn';\n\nexport default OpenIdSignIn;\n","import { useEffect } from 'react';\n\nimport { LAYOUT_DEFAULT_STATE, useLayoutActionContext } from '../components/Layout/LayoutProvider';\n\n/**\n * 레이아웃의 헤더 및 푸터 형태 설정을 할 수 있는 커스텀 훅.\n * 인자 객체로 담지 않은 값들은 기본 값으로 설정됩니다.\n *\n * [기본 값]\n * isMain: false,\n * hasBackBtnOnHeader: false,\n * hasHomeBtnOnHeader: false,\n * hasCartBtnOnHeader: false,\n * hasBottomNav: false,\n * hasCancelBtnOnHeader: false,\n * title: '',\n * @param {{ isMain?: boolean, hasHomeBtnOnHeader?: boolean, hasBackBtnOnHeader?: boolean, hasCartBtnOnHeader?: boolean, hasCancelBtnOnHeader?: boolean, hasBottomNav?: boolean, title?: string }} layoutStatus\n */\n\nconst useLayoutChanger = (layoutStatus = LAYOUT_DEFAULT_STATE) => {\n  const { changeLayoutStatus } = useLayoutActionContext();\n\n  useEffect(() => {\n    if (changeLayoutStatus) {\n      changeLayoutStatus(layoutStatus);\n    }\n  }, [changeLayoutStatus, layoutStatus]);\n};\n\nexport default useLayoutChanger;\n","import { useTranslation } from 'react-i18next';\nimport { Link } from 'react-router-dom';\n\nimport { OpenIdSignInProvider, useMallStateContext } from '@shopby/react-components';\n\nimport OpenIdSignIn from '../../components/OpenIdSignIn';\nimport useLayoutChanger from '../../hooks/useLayoutChanger';\n\nconst SignUpMenu = () => {\n  const { t } = useTranslation('title');\n  useLayoutChanger({\n    hasBackBtnOnHeader: true,\n    title: t('signUp'),\n  });\n\n  const { openIdJoinConfig } = useMallStateContext();\n\n  return (\n    <div className=\"sign-up-menu\">\n      <div className=\"sign-up-menu__link-normal\">\n        <Link to=\"/sign-up/form\">쇼핑몰 회원가입</Link>\n      </div>\n      {openIdJoinConfig.providers && (\n        <div className=\"sign-up-menu__link-open-id\">\n          <OpenIdSignInProvider>\n            <OpenIdSignIn label=\"회원가입\" providers={openIdJoinConfig.providers} />\n          </OpenIdSignInProvider>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default SignUpMenu;\n\nSignUpMenu.propTypes = {};\n","import SignUpMenu from './SignUpMenu';\n\nexport default SignUpMenu;\n"],"names":[],"sourceRoot":""}