{"version":3,"file":"src_pages_ProductSectionList_index_js.aca0730acbb35fee4d57.bundle.js","mappings":";;;;;;;;;;;;;;;;;;;AAAA;;;;;;;;;;;;;;;;;ACAA;AAEA;AAEA;AAEA;AACA;AAEA;AACA;AAAA;AAIA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACdA;AACA;AACA;AAEA;AAMA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAGA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AANA;AAAA;AAOA;AAAA;AAAA;AAAA;AAEA;AAAA;AAEA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AAEA;AAAA;AAAA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAGA;AAEA","sources":["webpack://@shopby/react-skin/./node_modules/@shopby/react-components/dist/esm/display/ProductSectionListProvider/ProductSectionListProvider.js","webpack://@shopby/react-skin/./src/pages/ProductSectionList/ProductSectionListPage.jsx","webpack://@shopby/react-skin/./src/pages/ProductSectionList/ProductSectionListWrap.jsx","webpack://@shopby/react-skin/./src/pages/ProductSectionList/index.js"],"sourcesContent":["var __assign=this&&this.__assign||function(){return __assign=Object.assign||function(t){for(var e,r=1,o=arguments.length;r<o;r++)for(var n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},__assign.apply(this,arguments)},__rest=this&&this.__rest||function(t,e){var r={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(r[o]=t[o]);if(null!=t&&\"function\"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(t);n<o.length;n++)e.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(t,o[n])&&(r[o[n]]=t[o[n]])}return r},__read=this&&this.__read||function(t,e){var r=\"function\"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var o,n,a=r.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(o=a.next()).done;)i.push(o.value)}catch(t){n={error:t}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return i},__spreadArray=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var o,n=0,a=e.length;n<a;n++)!o&&n in e||(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))};import{jsx as _jsx}from\"react/jsx-runtime\";import{createContext,useState,useContext,useMemo}from\"react\";import{THUMB_LIST_TYPE}from\"@shopby/shared\";import{displayHelper,executeHelper}from\"@shopby/shared/helpers\";var _a=displayHelper.productSection,Helper=_a.Helper,QUERY_KEY=_a.QUERY_KEY,DEFAULT_PROVIDER_STATE={displaySectionResponse:null,rightSpaceColor:\"\",leftSpaceColor:\"\",productTotalCount:0,displayConfig:{displayHeight:0,displayType:THUMB_LIST_TYPE.GALLERY,displayWidth:0},displayableStock:!1,sectionExplain:\"\",imageUrl:\"\",label:\"\",sectionId:\"\",sectionNo:0,recommendedProducts:[],products:[],accumulationProducts:[],promotionText:\"\",pageNumber:1,sortType:\"SALE\"},ProductSectionListStateContext=createContext(null),ProductSectionListActionContext=createContext(null),ProductSectionListProvider=function(t){var e=t.platformType,r=t.children,o=__read(useState(DEFAULT_PROVIDER_STATE.displaySectionResponse),2),n=o[0],a=o[1],i=__read(useState(DEFAULT_PROVIDER_STATE.label),2),s=i[0],c=i[1],u=__read(useState(DEFAULT_PROVIDER_STATE.productTotalCount),2),l=u[0],p=u[1],_=__read(useState(DEFAULT_PROVIDER_STATE.products),2),d=_[0],S=_[1],y=__read(useState(DEFAULT_PROVIDER_STATE.pageNumber),2),f=y[0],T=y[1],E=__read(useState(DEFAULT_PROVIDER_STATE.sortType),2),P=E[0],h=E[1],x=__read(useState(DEFAULT_PROVIDER_STATE.accumulationProducts),2),A=x[0],m=x[1],L=useMemo((function(){return executeHelper(new Helper(e))}),[]).executeQuery,v=useMemo((function(){return{fetchProductSectionList:function(t){var e=t.sectionsId,r=t.pageNumber,o=void 0===r?1:r,n=t.soldOut,i=void 0!==n&&n,s=__rest(t,[\"sectionsId\",\"pageNumber\",\"soldOut\"]);return L(QUERY_KEY.QUERY_DISPLAY_SECTIONS_IDS_SECTIONID,{payload:__assign({sectionsId:e,pageNumber:o,soldout:i},s),onSuccess:function(t){var e=t.data;a(e),T(o),c(e.label),p(e.productTotalCount),m((function(t){return 1===o?e.products:__spreadArray(__spreadArray([],__read(t),!1),__read(e.products),!1)})),S(e.products)}})},updateSortType:function(t){h(t)}}}),[P,f]);return _jsx(ProductSectionListStateContext.Provider,__assign({value:{label:s,productTotalCount:l,products:d,sortType:P,pageNumber:f,accumulationProducts:A,displaySectionResponse:n}},{children:_jsx(ProductSectionListActionContext.Provider,__assign({value:v},{children:r}))}))};export default ProductSectionListProvider;export var useProductSectionListStateContext=function(){var t=useContext(ProductSectionListStateContext);if(!t)throw new Error(\"INVALID_ProductSectionListStateContext\");return t};export var useProductSectionListActionContext=function(){var t=useContext(ProductSectionListActionContext);if(!t)throw new Error(\"INVALID_ProductSectionListActionContext\");return t};","import { useOutletContext } from 'react-router-dom';\n\nimport { ProductSectionListProvider } from '@shopby/react-components';\n\nimport ProductSectionListWrap from './ProductSectionListWrap';\n\nexport const ProductSectionListPage = () => {\n  const platformType = useOutletContext();\n\n  return (\n    <ProductSectionListProvider platformType={platformType}>\n      <ProductSectionListWrap />\n    </ProductSectionListProvider>\n  );\n};\n","import { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useParams } from 'react-router-dom';\n\nimport {\n  usePageScriptsActionContext,\n  useProductSectionListActionContext,\n  useProductSectionListStateContext,\n} from '@shopby/react-components';\n\nimport GalleryListPage from '../../components/GalleryListPage';\nimport useLayoutChanger from '../../hooks/useLayoutChanger';\n\nconst PER_PAGE_COUNT = 10;\nconst SORT_BY = [\n  { value: 'SALE', label: '판매량순' },\n  { value: 'LOW_PRICE', label: '낮은가격순' },\n  { value: 'HIGH_PRICE', label: '높은가격순' },\n  { value: 'REVIEW', label: '상품후기순' },\n  { value: 'REGISTER', label: '등록일순' },\n];\n\nconst ProductSectionListWrap = () => {\n  const { sectionsId } = useParams();\n  const { sortType, label, productTotalCount, pageNumber, accumulationProducts, displaySectionResponse } =\n    useProductSectionListStateContext();\n  const { fetchProductSectionList, updateSortType } = useProductSectionListActionContext();\n  const { applyPageScripts } = usePageScriptsActionContext();\n  const [queryString, setQueryString] = useState({\n    pageNumber,\n    sectionsId,\n    pageSize: PER_PAGE_COUNT,\n    by: sortType,\n    soldOut: true,\n  });\n  const [disabled, setDisabled] = useState(false);\n\n  const { t } = useTranslation('title');\n\n  const handleIntersect = () => {\n    setDisabled(true);\n    if (accumulationProducts.length >= productTotalCount) return;\n\n    setQueryString((prev) => ({ ...prev, pageNumber: prev.pageNumber + 1 }));\n  };\n\n  useLayoutChanger({\n    hasBackBtnOnHeader: true,\n    hasBottomNav: true,\n    hasCartBtnOnHeader: true,\n    title: t(label),\n  });\n\n  useEffect(() => {\n    window.scrollTo(0, 0);\n    setQueryString((prev) => ({ ...prev, pageNumber: 1, by: sortType }));\n  }, [sortType]);\n\n  useEffect(() => {\n    fetchProductSectionList(queryString);\n    setDisabled(false);\n  }, [queryString]);\n\n  useEffect(() => {\n    if (!displaySectionResponse) return;\n\n    applyPageScripts('DISPLAY_SECTION', { displaySection: displaySectionResponse });\n  }, [displaySectionResponse]);\n\n  return (\n    <GalleryListPage\n      totalCount={productTotalCount}\n      products={accumulationProducts}\n      sortType={sortType}\n      sortBy={SORT_BY}\n      updateSortType={updateSortType}\n      handleIntersect={handleIntersect}\n      disabled={disabled}\n    />\n  );\n};\n\nexport default ProductSectionListWrap;\n","export { ProductSectionListPage as default } from './ProductSectionListPage.jsx';\n"],"names":[],"sourceRoot":""}