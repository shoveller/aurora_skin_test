{"version":3,"file":"src_pages_DisplayCategoryList_index_js.77c152bdd1f43c98935c.bundle.js","mappings":";;;;;;;;;;;;;AAAA;;;;;;;;;;;;;;;;;;;ACAA;;;;;;;;;;;;;;;;;;;ACAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAA;AACA;AAEA;AAEA;AAEA;AACA;AAEA;AAAA;AACA;AAAA;AAEA;AAAA;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAGA;AACA;AAEA;AAAA;AAAA;AAEA;AAKA;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClDA;AACA;AAEA;AAMA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAGA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AARA;AAAA;AAUA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AAEA;AAAA;AAEA;AACA;AACA;AAAA;AAAA;AAEA;AAEA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AAAA;AAAA;AAEA;AACA;AACA;AAAA;AAAA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAGA;AAEA;;;;;;;;;;;;;;;AC3FA;AAEA;;;;;;;;;;;;;;;;;;;;;ACFA;AAEA;AAEA;AAEA;AACA;AAEA;AAAA;AAAA;AACA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAEA;AAMA;AAEA;AAEA;AACA;AACA;AACA;;;;;;;;;;;;;;;;AC9BA;AAEA;AAEA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAEA;AAEA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAEA;AAAA;AAKA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AACA;;;;;;;;;;;;;;;;AC9BA;AAEA;AAEA;AACA;AAAA;AACA;AAAA;AAEA;AAEA;AAAA;AAAA;AAAA;AACA;AAEA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAEA;AACA;AAAA;AAGA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAKA;AAKA;AACA;;;;;;;;;;;;;;;;;;;;;;AC5CA;AAEA;AAEA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAEA;AAEA;AAEA;AACA;AAAA;AACA;AAAA;AAEA;AACA;AAAA;AAIA;AAEA;AACA;AACA;AAAA;AAGA;AAKA;AAEA;;;;;;;;;;;;;;;;ACnCA;AAEA;AAEA;AAAA;AACA;AAAA;AAAA;AAEA;AAEA;AACA;AAAA;AACA;AAAA;AACA;AACA;AAAA;AAEA;AAGA;AAAA;AAIA;AAIA;AAAA;AACA;AACA;AAAA;AAEA;AACA;AAAA;AAIA;AAKA;AAEA","sources":["webpack://@shopby/react-skin/./node_modules/@shopby/react-components/dist/esm/common/VisibleComponent/VisibleComponent.js","webpack://@shopby/react-skin/./node_modules/@shopby/react-components/dist/esm/display/CategoriesProvider/CategoriesProvider.js","webpack://@shopby/react-skin/./node_modules/@shopby/react-components/dist/esm/product/ProductSearchProvider/ProductSearchProvider.js","webpack://@shopby/react-skin/./src/pages/DisplayCategoryList/DisplayCategoryList.jsx","webpack://@shopby/react-skin/./src/pages/DisplayCategoryList/DisplayCategoryListWrap.jsx","webpack://@shopby/react-skin/./src/pages/DisplayCategoryList/index.js","webpack://@shopby/react-skin/./src/pages/DisplayCategoryList/menu/CategoryMenu.jsx","webpack://@shopby/react-skin/./src/pages/DisplayCategoryList/menu/MenuBreadCrumb.jsx","webpack://@shopby/react-skin/./src/pages/DisplayCategoryList/menu/MenuCallout.jsx","webpack://@shopby/react-skin/./src/pages/DisplayCategoryList/menu/MenuCalloutItem.jsx","webpack://@shopby/react-skin/./src/pages/DisplayCategoryList/menu/MenuGrid.jsx"],"sourcesContent":["import{Fragment as _Fragment,jsx as _jsx}from\"react/jsx-runtime\";var VisibleComponent=function(n){var t=n.shows,o=n.TruthyComponent,e=n.FalsyComponent,r=void 0===e?_jsx(_Fragment,{}):e;return\"function\"==typeof t&&t()||t?o:r};export default VisibleComponent;","var __assign=this&&this.__assign||function(){return __assign=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},__assign.apply(this,arguments)},__read=this&&this.__read||function(e,t){var r=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var o,a,i=r.call(e),n=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)n.push(o.value)}catch(e){a={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return n};import{jsx as _jsx}from\"react/jsx-runtime\";import{createContext,useContext,useMemo,useState}from\"react\";import{displayHelper,executeHelper}from\"@shopby/shared\";var _a=displayHelper.categories,Helper=_a.Helper,QUERY_KEY=_a.QUERY_KEY,DEFAULT_PROVIDER_STATE={parentCategories:{categories:[],categoryInfo:{}},currentCategories:{categories:[],categoryInfo:{}},childCategories:{categories:[],categoryInfo:{}},originCategories:{multiLevelCategories:[],flatCategories:[]},isVisibleCallout:!1},CategoriesStateContext=createContext(null),CategoriesActionContext=createContext(null),CategoriesProvider=function(e){var t=e.children,r=__read(useState(DEFAULT_PROVIDER_STATE.parentCategories),2),o=r[0],a=r[1],i=__read(useState(DEFAULT_PROVIDER_STATE.currentCategories),2),n=i[0],s=i[1],u=__read(useState(DEFAULT_PROVIDER_STATE.childCategories),2),c=u[0],g=u[1],l=__read(useState(DEFAULT_PROVIDER_STATE.isVisibleCallout),2),C=l[0],_=l[1],d=__read(useState(DEFAULT_PROVIDER_STATE.originCategories),2),f=d[0],p=d[1],E=useMemo((function(){return executeHelper(new Helper)}),[]).executeQuery,x=useMemo((function(){return{searchCategoryMenu:function(e){var t=e.categoryNo,r=e.depth;return E(QUERY_KEY.QUERY_CATEGORY_RESULT,{payload:{categoryNo:t,depth:r},onSuccess:function(e){var t=e.data,r=t.parentCategories,o=t.currentCategories,i=t.childCategories,n=t.originCategories;a(r),s(o),g(i),p(n)}})},toggleCallout:function(e){void 0===e&&(e=!1),_(e)}}}),[C]);return _jsx(CategoriesStateContext.Provider,__assign({value:{parentCategories:o,currentCategories:n,childCategories:c,isVisibleCallout:C,originCategories:f}},{children:_jsx(CategoriesActionContext.Provider,__assign({value:x},{children:t}))}))};export default CategoriesProvider;export var useCategoriesStateContext=function(){var e=useContext(CategoriesStateContext);if(!e)throw new Error(\"INVALID_CategoriesStateContext\");return e};export var useCategoriesActionContext=function(){var e=useContext(CategoriesActionContext);if(!e)throw new Error(\"INVALID_CategoriesActionContext\");return e};","var __assign=this&&this.__assign||function(){return __assign=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},__assign.apply(this,arguments)},__read=this&&this.__read||function(e,t){var r=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var a,o,c=r.call(e),n=[];try{for(;(void 0===t||t-- >0)&&!(a=c.next()).done;)n.push(a.value)}catch(e){o={error:e}}finally{try{a&&!a.done&&(r=c.return)&&r.call(c)}finally{if(o)throw o.error}}return n},__spreadArray=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var a,o=0,c=t.length;o<c;o++)!a&&o in t||(a||(a=Array.prototype.slice.call(t,0,o)),a[o]=t[o]);return e.concat(a||Array.prototype.slice.call(t))};import{jsx as _jsx}from\"react/jsx-runtime\";import{createContext,useContext,useMemo,useState}from\"react\";import{executeHelper,productHelper}from\"@shopby/shared/helpers\";var _a=productHelper.productSearch,Helper=_a.Helper,QUERY_KEY=_a.QUERY_KEY,DEFAULT_STATE={productSearchResponse:null,pageCount:0,brands:[],category:{depth1Categories:[],depth2Categories:[],depth3Categories:[],depth4Categories:[],depth5Categories:[],multiLevelCategories:[]},totalCount:0,minPrice:0,displayableStock:!1,maxPrice:0,clickUrlPrefix:null,items:[],accumulationProducts:[],products:[],pageNumber:1,sortType:\"POPULAR\"},ProductSearchStateContext=createContext(null),ProductSearchActionContext=createContext(null),ProductSearchProvider=function(e){var t=e.children,r=__read(useState(DEFAULT_STATE.productSearchResponse),2),a=r[0],o=r[1],c=__read(useState(DEFAULT_STATE.pageCount),2),n=c[0],u=c[1],s=__read(useState(DEFAULT_STATE.brands),2),i=s[0],_=s[1],d=__read(useState(DEFAULT_STATE.category),2),l=d[0],p=d[1],S=__read(useState(DEFAULT_STATE.totalCount),2),T=S[0],A=S[1],h=__read(useState(DEFAULT_STATE.minPrice),2),E=h[0],x=h[1],P=__read(useState(DEFAULT_STATE.displayableStock),2),f=P[0],y=P[1],m=__read(useState(DEFAULT_STATE.maxPrice),2),C=m[0],g=m[1],U=__read(useState(DEFAULT_STATE.clickUrlPrefix),2),v=U[0],L=U[1],b=__read(useState(DEFAULT_STATE.products),2),D=b[0],F=b[1],R=__read(useState(DEFAULT_STATE.items),2),k=R[0],H=R[1],Y=__read(useState(DEFAULT_STATE.pageNumber),2),j=Y[0],N=Y[1],w=__read(useState(DEFAULT_STATE.sortType),2),O=w[0],Q=w[1],I=__read(useState(DEFAULT_STATE.accumulationProducts),2),K=I[0],M=I[1],B=useMemo((function(){return executeHelper(new Helper)}),[]).executeQuery,V=useMemo((function(){return{searchProductsBy:function(e){B(QUERY_KEY.QUERY_SEARCH_PRODUCTS_BY,{payload:__assign({},e),onSuccess:function(t){var r=t.data,a=r.pageCount,c=r.brands,n=r.category,s=r.totalCount,i=r.minPrice,d=r.displayableStock,l=r.maxPrice,S=r.clickUrlPrefix,T=r.products,h=r.items,E=r.originalResponse;o(E),u(a),_(c),p(n),A(s),x(i),y(d),g(l),L(S),M((function(t){return 1===e.pageNumber?T:__spreadArray(__spreadArray([],__read(t),!1),__read(T),!1)})),F(T),H(h),N(e.pageNumber)}})},updateSortType:function(e){Q(e)}}}),[O]);return _jsx(ProductSearchStateContext.Provider,__assign({value:{pageNumber:j,pageCount:n,brands:i,category:l,totalCount:T,minPrice:E,displayableStock:f,maxPrice:C,clickUrlPrefix:v,accumulationProducts:K,products:D,items:k,sortType:O,productSearchResponse:a}},{children:_jsx(ProductSearchActionContext.Provider,__assign({value:V},{children:t}))}))};export default ProductSearchProvider;export var useProductSearchStateContext=function(){var e=useContext(ProductSearchStateContext);if(!e)throw Error(\"INVALID_ProductSearchStateContext\");return e};export var useProductSearchActionContext=function(){var e=useContext(ProductSearchActionContext);if(!e)throw Error(\"INVALID_ProductSearchActionContext\");return e};","import { useTranslation } from 'react-i18next';\nimport { useSearchParams } from 'react-router-dom';\n\nimport { ProductSearchProvider, CategoriesProvider, VisibleComponent } from '@shopby/react-components';\n\nimport useLayoutChanger from '../../hooks/useLayoutChanger';\n\nimport DisplayCategoryListWrap from './DisplayCategoryListWrap';\nimport CategoryMenu from './menu/CategoryMenu';\n\nconst DisplayCategoryList = () => {\n  const { t } = useTranslation('title');\n\n  const [searchParams] = useSearchParams();\n  const keyword = searchParams.get('keyword') ?? '';\n  const categoryNo = Number(searchParams.get('categoryNo'));\n  const depth = Number(searchParams.get('depth') ?? 1);\n\n  if (keyword) {\n    useLayoutChanger({\n      hasBackBtnOnHeader: true,\n      hasBottomNav: true,\n      hasCartBtnOnHeader: true,\n      title: keyword,\n      hasSearchKeywordHeader: true,\n    });\n  } else {\n    useLayoutChanger({\n      hasBackBtnOnHeader: true,\n      hasBottomNav: true,\n      hasCartBtnOnHeader: true,\n      title: t('상품 목록'),\n    });\n  }\n\n  return (\n    <ProductSearchProvider>\n      <VisibleComponent\n        shows={!keyword}\n        TruthyComponent={\n          <CategoriesProvider>\n            <CategoryMenu categoryNo={categoryNo} depth={depth} />\n          </CategoriesProvider>\n        }\n      />\n      <DisplayCategoryListWrap />\n    </ProductSearchProvider>\n  );\n};\n\nexport default DisplayCategoryList;\n","import { useEffect, useMemo, useState } from 'react';\nimport { useSearchParams } from 'react-router-dom';\n\nimport {\n  usePageScriptsActionContext,\n  useProductSearchActionContext,\n  useProductSearchStateContext,\n} from '@shopby/react-components';\n\nimport GalleryListPage from '../../components/GalleryListPage';\n\nconst PER_PAGE_COUNT = 10;\nconst PARAM_TYPE = {\n  KEYWORD: 'keyword',\n  CATEGORY_NO: 'categoryNo',\n};\nconst SORT_BY = [\n  { value: 'POPULAR', label: '판매량순' },\n  { value: 'LOW_PRICE', label: '낮은가격순' },\n  { value: 'HIGH_PRICE', label: '높은가격순' },\n  { value: 'REVIEW', label: '상품후기순' },\n  { value: 'RECENT_PRODUCT', label: '등록일순' },\n];\n\nconst DisplayCategoryListWrap = () => {\n  const { pageNumber, totalCount, sortType, accumulationProducts, productSearchResponse } =\n    useProductSearchStateContext();\n  const { searchProductsBy, updateSortType } = useProductSearchActionContext();\n  const { applyPageScripts } = usePageScriptsActionContext();\n  const [disabled, setDisabled] = useState(false);\n  const [searchParams] = useSearchParams();\n  const keywords = useMemo(() => searchParams.get(PARAM_TYPE.KEYWORD), [searchParams]);\n  const categoryNos = useMemo(() => searchParams.get(PARAM_TYPE.CATEGORY_NO), [searchParams]);\n\n  const [queryString, setQueryString] = useState({\n    categoryNos: categoryNos ?? '',\n    keywords,\n    pageNumber,\n    sortType,\n    pageSize: PER_PAGE_COUNT,\n    soldOut: true,\n    saleStatus: 'ONSALE',\n  });\n\n  const handleIntersect = () => {\n    setDisabled(true);\n    if (accumulationProducts.length >= totalCount) return;\n\n    setQueryString((prev) => ({ ...prev, pageNumber: prev.pageNumber + 1 }));\n  };\n\n  useEffect(() => {\n    window.scrollTo(0, 0);\n\n    setQueryString((prev) => ({\n      ...prev,\n      sortType,\n      pageNumber: 1,\n      categoryNos,\n    }));\n  }, [sortType, categoryNos]);\n\n  useEffect(() => {\n    searchProductsBy(queryString);\n    setDisabled(false);\n  }, [queryString]);\n\n  useEffect(() => {\n    if (!productSearchResponse) return;\n\n    if (searchParams.get('keyword')) {\n      applyPageScripts('PRODUCT_SEARCH', { searchedProduct: productSearchResponse });\n\n      return;\n    }\n    applyPageScripts('PRODUCT_LIST', { searchedProduct: productSearchResponse });\n  }, [productSearchResponse, searchParams]);\n\n  return (\n    <GalleryListPage\n      totalCount={totalCount}\n      products={accumulationProducts}\n      sortType={sortType}\n      sortBy={SORT_BY}\n      updateSortType={updateSortType}\n      handleIntersect={handleIntersect}\n      disabled={disabled}\n    />\n  );\n};\n\nexport default DisplayCategoryListWrap;\n","import DisplayCategoryList from './DisplayCategoryList';\n\nexport default DisplayCategoryList;\n","import { useEffect } from 'react';\n\nimport { number } from 'prop-types';\n\nimport { useCategoriesActionContext } from '@shopby/react-components';\n\nimport MenuBreadCrumb from './MenuBreadCrumb';\nimport MenuGrid from './MenuGrid';\n\nconst CategoryMenu = ({ categoryNo, depth }) => {\n  const { searchCategoryMenu, toggleCallout } = useCategoriesActionContext();\n\n  useEffect(() => {\n    searchCategoryMenu({ categoryNo, depth });\n    toggleCallout(false);\n  }, [categoryNo, depth]);\n\n  return (\n    <>\n      <MenuBreadCrumb />\n      <MenuGrid />\n    </>\n  );\n};\n\nexport default CategoryMenu;\n\nCategoryMenu.propTypes = {\n  categoryNo: number,\n  depth: number,\n};\n","import { useCategoriesActionContext, useCategoriesStateContext } from '@shopby/react-components';\n\nimport MenuCallout from './MenuCallout';\n\nconst MenuBreadCrumb = () => {\n  const { parentCategories, currentCategories, isVisibleCallout } = useCategoriesStateContext();\n  const { toggleCallout } = useCategoriesActionContext();\n\n  if (!parentCategories.categoryInfo.label) return <></>;\n\n  return (\n    <section className=\"breadcrumb\">\n      <h2 className=\"a11y\">메뉴보기</h2>\n      <div className=\"breadcrumb__section\">\n        <span className=\"breadcrumb__link\">\n          <a\n            href={`/products?categoryNo=${parentCategories.categoryInfo?.categoryNo}&depth=${parentCategories.categoryInfo?.depth}`}\n          >\n            {parentCategories.categoryInfo?.label}\n          </a>\n        </span>{' '}\n        <label className=\"breadcrumb__toggle\">\n          <input type=\"checkbox\" onChange={(e) => toggleCallout(e.target.checked)} checked={isVisibleCallout} />\n          <span>{currentCategories.categoryInfo?.label ?? '전체보기'}</span>\n        </label>\n      </div>\n      {isVisibleCallout && <MenuCallout />}\n    </section>\n  );\n};\nexport default MenuBreadCrumb;\n","import { useCategoriesActionContext, useCategoriesStateContext } from '@shopby/react-components';\n\nimport MenuCalloutItem from './MenuCalloutItem';\n\nconst MenuCallout = () => {\n  const { parentCategories } = useCategoriesStateContext();\n  const { searchCategoryMenu } = useCategoriesActionContext();\n\n  if (!parentCategories.categoryInfo.label) return <></>;\n\n  const onClickCalloutMenu = ({ currentCategoryNo, categoryNo, depth }) => {\n    if (currentCategoryNo === categoryNo) return;\n\n    searchCategoryMenu({ categoryNo, depth });\n  };\n\n  return (\n    <section className=\"category-callout\">\n      <h3 className=\"a11y\">하위 메뉴 패널</h3>\n      <menu className=\"category-callout__list\">\n        {parentCategories.categories.map((category) => (\n          <li\n            key={category.categoryNo}\n            className={`${parentCategories.categoryInfo?.categoryNo === category.categoryNo ? 'is-active' : ''}`}\n          >\n            <button\n              className=\"category-callout__btn\"\n              onClick={() => {\n                onClickCalloutMenu({\n                  currentCategoryNo: parentCategories.categoryInfo?.categoryNo,\n                  categoryNo: category.categoryNo,\n                  depth: category.depth,\n                });\n              }}\n            >\n              {category.label}\n            </button>\n            {parentCategories.categoryInfo?.categoryNo === category.categoryNo && <MenuCalloutItem />}\n          </li>\n        ))}\n      </menu>\n    </section>\n  );\n};\nexport default MenuCallout;\n","import { useSearchParams } from 'react-router-dom';\n\nimport { useCategoriesStateContext } from '@shopby/react-components';\n\nconst MenuCalloutItem = () => {\n  const { parentCategories, currentCategories } = useCategoriesStateContext();\n  const [searchParams] = useSearchParams();\n\n  if (!parentCategories.categoryInfo.label) return <></>;\n\n  const currentCategoryNo = Number(searchParams.get('categoryNo'));\n\n  return (\n    <div className=\"category-callout__sub\">\n      <nav className=\"category-callout__sub-nav\">\n        <a\n          className=\"category-callout__link\"\n          href={`/products?categoryNo=${parentCategories?.categoryInfo?.categoryNo}`}\n        >\n          전체보기 {'>'}\n        </a>\n        {currentCategories.categories?.map((category) => (\n          <a\n            key={category.categoryNo}\n            className={`${currentCategoryNo === category.categoryNo ? 'is-active' : ''} category-callout__link`}\n            href={`/products?categoryNo=${category.categoryNo}&depth=${category.depth}`}\n          >\n            {category.label}\n          </a>\n        ))}\n      </nav>\n    </div>\n  );\n};\n\nexport default MenuCalloutItem;\n","import { Link } from 'react-router-dom';\n\nimport { useCategoriesStateContext } from '@shopby/react-components';\n\nconst MenuGrid = () => {\n  const { currentCategories, childCategories } = useCategoriesStateContext();\n\n  if (!currentCategories.categoryInfo?.label) return <></>;\n\n  return (\n    <nav className=\"category-menu\">\n      <ul className=\"category-menu__slide\">\n        {currentCategories.categories.map((category) => (\n          <li key={category.categoryNo}>\n            <Link\n              className={`category-menu__link ${\n                currentCategories.categoryInfo.categoryNo === category.categoryNo ? 'is-active' : ''\n              }`}\n              to={`/products?categoryNo=${category.categoryNo}&depth=${category.depth}`}\n            >\n              {category.label}\n            </Link>\n          </li>\n        ))}\n      </ul>\n\n      <ul className=\"category-menu__list\">\n        {childCategories.categories?.map((lowerMenu) => (\n          <li key={lowerMenu.categoryNo}>\n            <Link\n              className=\"category-menu__link\"\n              to={`/products?categoryNo=${lowerMenu.categoryNo}&depth=${lowerMenu.depth}`}\n            >\n              {lowerMenu.label}\n            </Link>\n          </li>\n        ))}\n      </ul>\n    </nav>\n  );\n};\n\nexport default MenuGrid;\n"],"names":[],"sourceRoot":""}