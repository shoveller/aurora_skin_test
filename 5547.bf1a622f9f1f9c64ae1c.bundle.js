"use strict";(self.webpackChunk_shopby_react_skin=self.webpackChunk_shopby_react_skin||[]).push([[5547],{68:(e,t,n)=>{n.d(t,{ZP:()=>p,cV:()=>m,n0:()=>v});var r=n(5893),a=n(7294),o=n(7186),i=function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},i.apply(this,arguments)},l=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return i},c=(0,a.createContext)(null),u=(0,a.createContext)(null),s=o.$K.identificationVerification,f=s.Helper,d=s.QUERY_KEY;const p=function(e){var t=e.children,n=l((0,a.useState)(false),2),s=n[0],p=n[1],m=l((0,a.useState)(false),2),v=m[0],_=m[1],h=l((0,a.useState)(null),2),y=h[0],E=h[1],I=l((0,a.useState)(""),2),w=I[0],S=I[1],g=(0,a.useMemo)((function(){return(0,o.p6)(new f)}),[]).executeQuery,C=(0,a.useMemo)((function(){return{updateIsIdentificationVerificationReSend:p,updateIsCiExist:_,updateCi:S,moveIdVerification:function(e){return g(d.QUERY_KCP_ID_VERIFICATION_FORM,{payload:e,onSuccess:function(e){var t=e.data;E(t)}})},getIdVerificationResponse:function(e){return g(d.QUERY_KCP_ID_VERIFICATION_RESPONSE,{payload:e})},verifyCi:function(e){return g(d.QUERY_PROFILE_CI_EXISTS,{payload:e})}}}),[]);return(0,r.jsx)(u.Provider,i({value:C},{children:(0,r.jsx)(c.Provider,i({value:{isIdentificationVerificationReSend:s,isCiExist:v,kcpForm:y,ci:w}},{children:t}))}))};var m=function(){var e=(0,a.useContext)(u);if(!e)throw new Error("INVALID_IdentificationVerificationActionContext");return e},v=function(){var e=(0,a.useContext)(c);if(!e)throw new Error("INVALID_IdentificationVerificationStateContext");return e}},2906:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(5697),a=n(7294),o=n(7856).sanitize,i=function(e){var t=e.html,n=e.style,r=e.className,i=void 0===r?"":r;return a.createElement("div",{className:"editor ".concat(i),dangerouslySetInnerHTML:{__html:o(null!=t?t:"",{USE_PROFILES:{html:!0},ADD_TAGS:["iframe","a"],ADD_ATTR:["allow","allowfullscreen","frameborder","scrolling","target","rel","type"]})},style:n})};i.propTypes={className:r.string,style:r.object,html:r.string};const l=i},8504:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n(2906).Z},5547:(e,t,n)=>{n.r(t),n.d(t,{default:()=>u});var r=n(68),a=n(7294),o=n(8504),i=n(7294);const l=function(){var e=(0,r.cV)().moveIdVerification,t=(0,r.n0)().kcpForm,n=new URLSearchParams(location.search),l=n.get("key"),c=n.get("returnUrl"),u=(0,a.useRef)(null);return(0,a.useEffect)((function(){l?window.parent.postMessage(l):e({returnUrl:"".concat(location.origin,"/callback?returnUrl=").concat(c)})}),[l,c]),(0,a.useEffect)((function(){self.name="auth_popup",null!==t&&u.current.querySelector("#form_auth").submit()}),[t]),i.createElement(i.Fragment,null,i.createElement("iframe",{id:"kcp_cert",name:"kcp_cert",frameBorder:"0",scrolling:"no",style:{display:"none",width:"100%",height:"100%"},sandbox:"allow-top-navigation allow-top-navigation-by-user-activation allow-popups allow-scripts allow-modals allow-forms"},i.createElement("div",{className:"form",ref:u},i.createElement(o.Z,{html:t}))),i.createElement("div",{id:"popups-area"}))};var c=n(7294);const u=function(){return c.createElement(r.ZP,null,c.createElement(l,null))}}}]);